import{j as e,r as j,R as he}from"./react-BdCubYHz.js";import{R as Ke}from"./react-dom-DROicfU5.js";import{u as Z,C as Ge,a as Je,H as Ye,P as ue,O as ze,E as me,b as Ze}from"./@react-three-DFGkI1lQ.js";import{E as A,u as B}from"./react-error-boundary-CjL9E7Cy.js";import{M as $,a as Ue}from"./better-react-mathjax-DxDn-ObK.js";import"./d3-transition-D0z06rge.js";import"./d3-zoom-DJfp0ujn.js";import{l as Y}from"./d3-scale-DjanLsN9.js";import{r as ae}from"./d3-array-o8Dej1Ei.js";import{d as ge,p as fe}from"./d3-selection-Bg2aTuTQ.js";import{a as xe,b as je}from"./d3-axis-D3QohQNI.js";import{l as pe}from"./d3-shape-CjIy0WYm.js";import"./three-Dlbs-qyx.js";import"./react-use-measure-DvzsJVfN.js";import"./its-fine-UdzVbGov.js";import"./react-reconciler-C_iaNTue.js";import"./scheduler-DV1PgV85.js";import"./@babel-CF3RwP-h.js";import"./zustand-JvyHyJda.js";import"./use-sync-external-store-VaZ3XG0a.js";import"./three-stdlib-BpduEzU0.js";import"./@monogrid-7l7o_qaB.js";import"./suspend-react-BKIKQNXN.js";import"./d3-timer-DdKHrDhs.js";import"./d3-dispatch-kxCwF96_.js";import"./d3-interpolate-1ID44o_P.js";import"./d3-color-9lF95FHy.js";import"./d3-ease-DRPgKoYJ.js";import"./d3-format-CzD4bSOQ.js";import"./d3-path-CimkQT29.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function a(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerPolicy&&(l.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?l.credentials="include":u.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(u){if(u.ep)return;u.ep=!0;const l=a(u);fetch(u.href,l)}})();function de(t){const{nodes:n,materials:a}=Z("/models/magnet.glb");return e.jsxs("group",{...t,dispose:null,rotation:t.rotation||[0,t.orientation===0?0:Math.PI,0],children:[e.jsxs("group",{scale:[.763,.3,1],children:[e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube.geometry,material:a.Red}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube_1.geometry,material:a.Blue}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube_2.geometry,material:a.Metallic})]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.S.geometry,material:a.Text,position:[-.007,.32,1.556],scale:[2.043,1,2.043]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.N.geometry,material:a.Text,position:[-.001,.32,-1.636],rotation:[Math.PI,0,Math.PI],scale:[2.043,1,2.043]})]})}Z.preload("/models/magnet.glb");function Xe(t,n,a){j.useEffect(()=>{const o=setInterval(()=>{t()},n);return()=>clearInterval(o)},[n,...a])}function we(t,n){j.useEffect(()=>{if(!t.current)return;const a=new IntersectionObserver(([o])=>{n(o.isIntersecting)});return a.observe(t.current),()=>{a.disconnect()}},[t])}function _e(t){return t.toLowerCase().replace(/\s+/g,"-")}function De(t){return e.jsx("div",{className:"simulation-controls",children:t.children})}function _(t){const n=j.useRef(null),[a,o]=j.useState(!1),u=r=>(r-t.min)/(t.max-t.min)*100,l=r=>Math.max(t.min,Math.min(t.max,r)),h=r=>{if(!n.current)return;const s=n.current.getBoundingClientRect();let m;if(r instanceof MouseEvent?m=r.clientX:m=r.touches[0].clientX,m<s.left||m>s.right){o(!1),t.onFocusEnd?.();return}const x=l((m-s.left)/s.width),f=t.min+x*(t.max-t.min);t.onChange(f)},c=r=>{o(!0),t.onFocusStart?.(),h(r.nativeEvent)},i=r=>{o(!0),t.onFocusStart?.(),h(r.nativeEvent)};return j.useEffect(()=>{const r=m=>{a&&h(m)},s=()=>{o(!1),t.onFocusEnd?.()};return a&&(window.addEventListener("mousemove",r),window.addEventListener("mouseup",s),window.addEventListener("touchmove",r,{passive:!1}),window.addEventListener("touchend",s)),()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",s),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",s)}},[a]),e.jsxs("div",{className:"simulation-slider",onMouseDown:c,children:[e.jsx("div",{className:"sim-slider-label",children:e.jsx("p",{style:{color:t.color||"#447997"},children:t.label})}),e.jsx("div",{className:"simulation-slider-bar-container",children:e.jsxs("div",{className:"simulation-slider-bar",ref:n,onTouchStart:i,children:[e.jsx("div",{className:"sim-slider-left-gutter",style:{width:`${u(t.value)}%`,background:t.color||"#447997"}}),e.jsx("div",{className:"sim-slider-right-gutter",style:{width:`${100-u(t.value)}%`,left:`${u(t.value)}%`}}),e.jsx("div",{className:"sim-slider-knob",style:{left:`${u(t.value)}%`},children:e.jsx("div",{className:"sim-slider-knob-inner",style:{background:t.color||"#447997"}})})]})}),t.displayValue&&e.jsx("div",{className:"sim-slider-value",children:e.jsx("p",{children:t.value.toFixed(2)})})]})}const Qe=""+new URL("icon_3d-BTJu6E7S.svg",import.meta.url).href,et=async()=>{let t="unknown";try{t=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}let n={};try{let h=[];try{PerformanceObserver.supportedEntryTypes.forEach(c=>{try{const i=performance.getEntriesByType(c);i.length>0&&h.push({name:c,entries:i})}catch{}})}catch{}n={eventCounts:window.performance?.eventCounts||{},memory:{jsHeapSizeLimit:window.performance?.memory?.jsHeapSizeLimit||0,totalJSHeapSize:window.performance?.memory?.totalJSHeapSize||0,usedJSHeapSize:window.performance?.memory?.usedJSHeapSize||0},entries:h}}catch{}let a={};try{a={href:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,viewportSize:{width:window.innerWidth,height:window.innerHeight},browserWindowSize:{width:window.outerWidth,height:window.outerHeight},screenSize:{width:window.screen.width,height:window.screen.height},devicePixelRatio:window.devicePixelRatio}}catch{}let o={};try{o={title:document.title,referrer:document.referrer,readyState:document.readyState,charset:document.characterSet,lang:document.documentElement.lang,url:document.URL,visibilityState:document.visibilityState}}catch{}let u={};try{u={connection:{effectiveType:navigator.connection?.effectiveType||"unknown",downlink:navigator.connection?.downlink||0,rtt:navigator.connection?.rtt||0},cookieEnabled:navigator.cookieEnabled,deviceMemory:navigator.deviceMemory||0,doNotTrack:navigator.doNotTrack,hardwareConcurrency:navigator.hardwareConcurrency||0,language:navigator.language,languages:navigator.languages,onLine:navigator.onLine,userAgent:navigator.userAgent,userAgentData:{brands:navigator.userAgentData?.brands||[],mobile:navigator.userAgentData?.mobile||!1,platform:navigator.userAgentData?.platform||""},webdriver:navigator.webdriver||!1}}catch{}const l={source:{website:"mecanicascience.fr",page:"article_science_of_complexity"},type:"connection_report",payload:{timestamp:new Date().toISOString(),ipAddress:t,performances:n,window:a,document:o,navigator:u}};fetch("https://api.mecanicascience.fr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})},C=async(t,n)=>{let a="unknown";try{a=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}let o={};try{let r=[];try{PerformanceObserver.supportedEntryTypes.forEach(s=>{try{const m=performance.getEntriesByType(s);m.length>0&&r.push({name:s,entries:m})}catch{}})}catch{}o={eventCounts:window.performance?.eventCounts||{},memory:{jsHeapSizeLimit:window.performance?.memory?.jsHeapSizeLimit||0,totalJSHeapSize:window.performance?.memory?.totalJSHeapSize||0,usedJSHeapSize:window.performance?.memory?.usedJSHeapSize||0},entries:r}}catch{}let u={};try{u={name:t.name,message:t.message,cause:t.cause,stack:t.stack,digest:n?.digest||"",componentStack:n?.componentStack||""}}catch{}let l={};try{l={href:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,viewportSize:{width:window.innerWidth,height:window.innerHeight},browserWindowSize:{width:window.outerWidth,height:window.outerHeight},screenSize:{width:window.screen.width,height:window.screen.height},devicePixelRatio:window.devicePixelRatio}}catch{}let h={};try{h={title:document.title,referrer:document.referrer,readyState:document.readyState,charset:document.characterSet,lang:document.documentElement.lang,url:document.URL,visibilityState:document.visibilityState}}catch{}let c={};try{c={connection:{effectiveType:navigator.connection?.effectiveType||"unknown",downlink:navigator.connection?.downlink||0,rtt:navigator.connection?.rtt||0},cookieEnabled:navigator.cookieEnabled,deviceMemory:navigator.deviceMemory||0,doNotTrack:navigator.doNotTrack,hardwareConcurrency:navigator.hardwareConcurrency||0,language:navigator.language,languages:navigator.languages,onLine:navigator.onLine,userAgent:navigator.userAgent,userAgentData:{brands:navigator.userAgentData?.brands||[],mobile:navigator.userAgentData?.mobile||!1,platform:navigator.userAgentData?.platform||""},webdriver:navigator.webdriver||!1}}catch{}const i={source:{website:"mecanicascience.fr",page:"article_science_of_complexity"},type:"error_report",payload:{timestamp:new Date().toISOString(),ipAddress:a,error:u,performances:o,window:l,document:h,navigator:c}};fetch("https://api.mecanicascience.fr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})},tt=async(t,n,a)=>{let o="unknown";try{o=(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{}let u={};try{u={href:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,viewportSize:{width:window.innerWidth,height:window.innerHeight},browserWindowSize:{width:window.outerWidth,height:window.outerHeight},screenSize:{width:window.screen.width,height:window.screen.height},devicePixelRatio:window.devicePixelRatio}}catch{}let l={};try{l={title:document.title,referrer:document.referrer,readyState:document.readyState,charset:document.characterSet,lang:document.documentElement.lang,url:document.URL,visibilityState:document.visibilityState}}catch{}let h={};try{h={connection:{effectiveType:navigator.connection?.effectiveType||"unknown",downlink:navigator.connection?.downlink||0,rtt:navigator.connection?.rtt||0},cookieEnabled:navigator.cookieEnabled,deviceMemory:navigator.deviceMemory||0,doNotTrack:navigator.doNotTrack,hardwareConcurrency:navigator.hardwareConcurrency||0,language:navigator.language,languages:navigator.languages,onLine:navigator.onLine,userAgent:navigator.userAgent,userAgentData:{brands:navigator.userAgentData?.brands||[],mobile:navigator.userAgentData?.mobile||!1,platform:navigator.userAgentData?.platform||""},webdriver:navigator.webdriver||!1}}catch{}const c={source:{website:"mecanicascience.fr",page:"article_science_of_complexity"},type:"contact_form",payload:{name:t,email:n,message:a,trackingPayload:{timestamp:new Date().toISOString(),ipAddress:o,window:u,document:l,navigator:h}}};return(await fetch("https://api.mecanicascience.fr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok};function nt({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function it(){return e.jsx("div",{className:"loading-simulation",children:"Loading simulation...."})}function rt(){const{progress:t}=Je();let n=Math.round(t);return e.jsxs(Ye,{center:!0,style:{fontFamily:"'Railway', 'Montserrat', Arial'",color:"black",fontSize:"30px",width:"max-content"},children:["Loading simulation... ",n,"% done."]})}function qe(t){const n=t.show3DIcon!=!1&&!t.is2D;return e.jsx(e.Fragment,{children:e.jsx(A,{FallbackComponent:t.customErrorComponent||nt,onError:C,children:e.jsx(j.Suspense,{fallback:e.jsx(it,{}),children:e.jsxs("div",{className:"simulation-canvas-container",style:{aspectRatio:t.aspectRatio||"16/9"},children:[e.jsx("div",{className:"simulation-canvas-icon",children:n&&e.jsx("img",{src:Qe,className:"icon-3d",alt:"3D Icon"})}),!t.is2D&&e.jsx(Ge,{frameloop:t.visible?"always":"never",ref:t.canvasRef,className:"simulation-canvas",shadows:!0,resize:{scroll:!1},style:{cursor:n?"move":"default"},children:e.jsx(j.Suspense,{fallback:e.jsx(rt,{}),children:e.jsx("group",{name:"core",children:t.children})})}),t.is2D&&e.jsx("canvas",{className:"simulation-canvas",ref:t.canvasRef})]})})})})}function st({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function H(t){const n=j.createRef(),[a,o]=j.useState(!1);return we(n,u=>{t.onChangeVisibleState?.(u),o(u)}),e.jsx(e.Fragment,{children:e.jsx(A,{FallbackComponent:st,onError:C,children:e.jsxs("div",{className:"simulation-container",ref:n,children:[t.description&&e.jsxs("div",{className:"simulation-description",children:[e.jsx("div",{className:"simulation-description-title",children:t.title}),e.jsx("div",{className:"simulation-description-content",children:t.description})]}),e.jsx(qe,{aspectRatio:t.aspectRatio,canvasRef:t.canvasRef,is2D:t.is2D,visible:a,children:t.simulation}),e.jsx(De,{children:t.controls})]})})})}function at(t){const[n,a]=j.useState(.1),[o,u]=j.useState(!1),[l,h]=j.useState(1),[c,i]=j.useState(0),r=j.useRef(null),[s,m]=j.useState(!1);j.useEffect(()=>{r.current&&(r.current.style.cursor=s?"pointer":"unset")},[s]),Xe(()=>{o||a(g=>{let w=g-.01*(l===c?1:-1)/Math.pow(g+.5,2)*1.3;return Math.max(0,Math.min(1,w))})},20,[o,l,c]);let x=e.jsxs(e.Fragment,{children:[e.jsxs("group",{name:"camera",children:[e.jsx(ue,{makeDefault:!0,position:[7,3.8,2.5],fov:55}),e.jsx(ze,{})]}),e.jsx("group",{name:"lights",children:e.jsx(me,{files:"/imgs/environmental_map.hdr",background:!0,backgroundBlurriness:.6})}),e.jsxs("group",{name:"simulation",children:[e.jsx(de,{position:[0,0,-12],onClick:()=>h(l===0?1:0),onPointerOver:()=>m(!0),onPointerOut:()=>m(!1),orientation:l}),e.jsx(de,{position:[0,0,4-11*(1-n)],onClick:()=>i(c===0?1:0),onPointerOver:()=>m(!0),onPointerOut:()=>m(!1),orientation:c})]})]}),f=e.jsx(e.Fragment,{children:e.jsx(_,{label:"Separation",value:n,onChange:a,onFocusStart:()=>u(!0),onFocusEnd:()=>u(!1),min:0,max:1,step:.01,color:"#746cc0ff",displayValue:!1})});return e.jsx(H,{aspectRatio:"21/9",canvasRef:r,title:t.title,description:t.description,simulation:x,controls:f})}const ot="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20320%20320'%3e%3cpath%20d='M82.87%20129.48S77.32%2098.96%20114.31%2074c-12.95%200-89.7%2030.52-89.7%20113.74%200%2033.09%2027.59%2059.73%2061.01%2058.19%2029.85-1.37%2054.07-25.6%2055.44-55.45%201.54-33.41-25.1-61-58.19-61zm154.26%200S231.58%2098.96%20268.57%2074c-12.95%200-89.7%2030.52-89.7%20113.74%200%2033.09%2027.58%2059.73%2061.01%2058.19%2029.85-1.37%2054.07-25.6%2055.44-55.45%201.54-33.41-25.1-61-58.19-61z'%20fill='%23b5b5b5'%3e%3c/path%3e%3c/svg%3e",lt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20320%20320'%3e%3cpath%20d='M239.64%2074.01c-32.16-.89-59.56%2023.76-61.9%2055.85-2.59%2035.43%2025.38%2064.97%2060.26%2064.97%200%200%200%2015.82-10.97%2034.02-5.9%209.79%204.91%2021.1%2015.04%2015.8%2030.22-15.81%2062.45-48.71%2056.36-110.25-3.24-32.64-26.45-59.5-58.79-60.39zm-156.74%200c-32.16-.89-59.56%2023.76-61.9%2055.85-2.59%2035.43%2025.38%2064.97%2060.26%2064.97%200%200%200%2015.82-10.97%2034.02-5.9%209.79%204.91%2021.1%2015.04%2015.8%2030.22-15.81%2062.45-48.71%2056.36-110.25-3.25-32.64-26.45-59.5-58.79-60.39z'%20fill='%23b5b5b5'%3e%3c/path%3e%3c/svg%3e";function ye({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went very wrong in the article."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function ct(t){return e.jsx(A,{FallbackComponent:ye,onError:C,children:e.jsx("article",{className:"article",children:t.children})})}function te(t){return e.jsx(A,{FallbackComponent:ye,onError:C,children:e.jsxs("section",{className:`part-upper ${t.className}`,id:_e(t.title),children:[t.hideTitle==null?e.jsx("h1",{className:"part-title",children:t.title}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"part-content",children:t.children})]})})}function z(t){return e.jsx(e.Fragment,{children:e.jsx(A,{FallbackComponent:ye,onError:C,children:e.jsxs("section",{id:_e(t.title?t.title:""),children:[t.title&&e.jsx("h2",{className:"section-title",children:t.title}),t.children]})})})}function M(t){return e.jsx("div",{className:"paragraph",children:t.children})}const Be={question:{svg:{viewBox:"0 0 1024 1024",paths:["M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7c0-19.7 12.4-37.7 30.9-44.8 59-22.7 97.1-74.7 97.1-132.5 0.1-39.3-17.1-76-48.3-103.3z","M512 732m-40 0a40 40 0 1 0 80 0 40 40 0 1 0-80 0Z"]},title:"Question",color:"#746cc0"},note:{svg:{viewBox:"0 0 1024 1024",paths:["M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z","M512 336m-48 0a48 48 0 1 0 96 0 48 48 0 1 0-96 0Z","M536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"]},title:"Note",color:"#4b4b4b"}};function W(t){return e.jsx(Oe,{...t,data:Be.question,children:t.children})}function q(t){return e.jsx(Oe,{...t,data:Be.note,children:t.children})}function Oe(t){const n=t.data;return e.jsxs("div",{className:`aside ${n.title.toLowerCase()}`,style:{borderLeft:`4px solid ${n.color}`},children:[e.jsxs("div",{className:"aside-title",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:n.svg.viewBox,fill:n.color,children:n.svg.paths.map((a,o)=>e.jsx("path",{d:a},o))}),e.jsx("span",{style:{color:n.color},children:n.title})]}),e.jsx("div",{className:"aside-content",children:t.children})]})}function ke(t){return e.jsxs("div",{className:"citation",children:[e.jsx("div",{className:"citation-left",children:e.jsx("img",{src:ot,alt:"Open quote"})}),e.jsx("div",{className:"citation-text",children:t.children}),e.jsx("div",{className:"citation-right",children:e.jsx("img",{src:lt,alt:"Close quote"})})]})}function d(t){return e.jsx(e.Fragment,{children:e.jsx("span",{className:`text-color-${t.type} ${t.bold?"text-color-bold":""} ${t.italic?"text-color-italic":""}`,children:t.children})})}function K(){return e.jsx("div",{style:{height:"4px"}})}function ve(t){let n=[];const a=(o,u,l)=>[Math.round(o[0]+(u[0]-o[0])*l),Math.round(o[1]+(u[1]-o[1])*l),Math.round(o[2]+(u[2]-o[2])*l)];for(let o=0;o<t.children.length;o++){const u=t.children[o],l=`rgba(${a(t.from,t.to,o/t.children.length)[0]}, ${a(t.from,t.to,o/t.children.length)[1]}, ${a(t.from,t.to,o/t.children.length)[2]}, 1)`;n.push(e.jsx("span",{style:{color:l},children:u},o))}return e.jsx("span",{className:`gradient-text ${t.bold?"gradient-text-bold":""} ${t.italic?"gradient-text-italic":""}`,children:n})}function J(t){const n=j.useRef(null),[a,o]=j.useState(!1),u=()=>{o(!a)};return e.jsxs("section",{className:"more-informations",children:[e.jsxs("div",{className:"more-informations-title",children:[e.jsx("div",{className:"more-informations-label",children:e.jsx("span",{children:"For more informations..."})}),e.jsx("h3",{className:"more-informations-title-content",children:t.title}),e.jsx("div",{className:"more-informations-icon",onClick:u,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",style:{transform:a?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.3s ease-in-out"},children:e.jsx("path",{fill:"currentColor",d:"M19 6.25l-1.5-1.5-7.5 7.5-7.5-7.5L1 6.25l9 9 9-9z"})})})]}),a&&e.jsx("div",{className:"more-informations-bar"}),e.jsx("div",{className:`more-informations-content ${a?"more-informations-content-open":""}`,ref:n,style:{height:a?"100%":"0px"},children:t.children})]})}function G(t){return e.jsxs("section",{className:"theorist-questions",children:[e.jsx("div",{className:"theorist-questions-title-bar theorist-questions-title-bar-up"}),e.jsx("div",{className:"theorist-questions-title",children:e.jsx("div",{className:"theorist-questions-title-content",children:"Theorist Corner"})}),e.jsx("div",{className:"theorist-questions-content",children:t.children}),e.jsx("div",{className:"theorist-questions-title-bar theorist-questions-title-bar-down"})]})}function U(t){return e.jsx("div",{className:"separator",...t})}function ht(t){const n=[];for(const a of t.items){const o=a.checked?"#2eb632":"#ff5151";n.push(e.jsxs("li",{className:"checkbox-item",children:[e.jsx("div",{className:a.checked?"checkbox-yes":"checkbox-no",children:a.checked?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",children:e.jsx("path",{d:"M160 144C151.2 144 144 151.2 144 160L144 480C144 488.8 151.2 496 160 496L480 496C488.8 496 496 488.8 496 480L496 160C496 151.2 488.8 144 480 144L160 144zM96 160C96 124.7 124.7 96 160 96L480 96C515.3 96 544 124.7 544 160L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 160zM404.4 268.7L324.4 396.7C320.2 403.4 313 407.6 305.1 408C297.2 408.4 289.6 404.8 284.9 398.4L236.9 334.4C228.9 323.8 231.1 308.8 241.7 300.8C252.3 292.8 267.3 295 275.3 305.6L302.3 341.6L363.7 243.3C370.7 232.1 385.5 228.6 396.8 235.7C408.1 242.8 411.5 257.5 404.4 268.8z"})}):e.jsx("svg",{viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M0 26.016q0 2.496 1.76 4.224t4.256 1.76h20q2.464 0 4.224-1.76t1.76-4.224v-20q0-2.496-1.76-4.256t-4.224-1.76h-20q-2.496 0-4.256 1.76t-1.76 4.256v20zM4 26.016v-20q0-0.832 0.576-1.408t1.44-0.608h20q0.8 0 1.408 0.608t0.576 1.408v20q0 0.832-0.576 1.408t-1.408 0.576h-20q-0.832 0-1.44-0.576t-0.576-1.408zM9.76 20.256q0 0.832 0.576 1.408t1.44 0.608 1.408-0.608l2.816-2.816 2.816 2.816q0.576 0.608 1.408 0.608t1.44-0.608 0.576-1.408-0.576-1.408l-2.848-2.848 2.848-2.816q0.576-0.576 0.576-1.408t-0.576-1.408-1.44-0.608-1.408 0.608l-2.816 2.816-2.816-2.816q-0.576-0.608-1.408-0.608t-1.44 0.608-0.576 1.408 0.576 1.408l2.848 2.816-2.848 2.848q-0.576 0.576-0.576 1.408z"})})}),e.jsxs("div",{children:[!a.checked&&e.jsx("div",{className:"crossbar"}),e.jsx("span",{style:{color:o},children:a.label}),a.description&&e.jsxs("span",{className:"description",children:[" - ",e.jsx("i",{children:a.description})]})]})]},a.label))}return e.jsx(e.Fragment,{children:e.jsx("ul",{children:n})})}function y(t){return t.type?e.jsx(d,{type:t.type,children:e.jsx($,{inline:!0,children:`$${t.children}$`})}):e.jsx($,{inline:!0,children:`$${t.children}$`})}function dt(t){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"graph-list",children:[e.jsx("div",{className:"graph-list-arrow",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",fill:"#6a5ff7",children:e.jsx("polygon",{points:"50 15, 100 100, 0 100"})})}),e.jsx("div",{className:"graph-list-bar"}),e.jsx("ol",{children:t.items.map((n,a)=>e.jsx("li",{className:"graph-list-item",children:n},a))})]})})}function ut(t){const n=j.useRef(null),[a,o]=j.useState(!1),u=()=>{o(!a)};return e.jsxs("section",{className:"more-informations",children:[e.jsxs("div",{className:"more-informations-title",children:[e.jsx("div",{className:"more-informations-label",children:e.jsx("span",{})}),e.jsx("h3",{className:"more-informations-title-content",children:"Sources"}),e.jsx("div",{className:"more-informations-icon",onClick:u,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",style:{transform:a?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.3s ease-in-out"},children:e.jsx("path",{fill:"currentColor",d:"M19 6.25l-1.5-1.5-7.5 7.5-7.5-7.5L1 6.25l9 9 9-9z"})})})]}),a&&e.jsx("div",{className:"more-informations-bar"}),e.jsx("div",{className:`more-informations-content ${a?"more-informations-content-open":""}`,ref:n,style:{height:a?"100%":"0px"},children:e.jsx(M,{children:e.jsx("ul",{children:t.list.map(([l,h,c],i)=>e.jsx("li",{className:"source-item",children:e.jsxs("div",{className:"source-item-content",children:[e.jsx("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:l}),e.jsx("p",{children:c})]})},i))})})})]})}function mt(t){const{nodes:n,materials:a}=Z("/models/spins_lattice.glb");return e.jsxs("group",{...t,dispose:null,children:[e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Lattice_1.geometry,material:a.Lattice,position:[1.729,.257,-8.117],rotation:[0,-1.571,0]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Lattice_2.geometry,material:a.Lattice,position:[3.342,.257,-6.733],rotation:[Math.PI,0,Math.PI],scale:[1,1,.869]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Atoms.geometry,material:a.Atom,position:[3.355,.27,-8.13],rotation:[0,-1.571,0]}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Spin.geometry,material:a.Spin,position:[3.577,.259,-8.298],rotation:[0,-Math.PI/2,0],scale:.866})]})}Z.preload("/models/spins_lattice.glb");function gt({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function ft({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"error-simulation custom-simulation-error",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function xt(t){const[n,a]=j.useState(0),[o,u]=j.useState(0),[l,h]=j.useState(t.zoomDataLevel[0][2]);function c(f){a(f);const g=t.zoomDataLevel.findIndex(([v])=>f<Number(v));u(g===-1?t.zoomDataLevel.length-1:g);const w=(f-t.zoomDataLevel[g-1][0])/(t.zoomDataLevel[g][0]-t.zoomDataLevel[g-1][0])*(t.zoomDataLevel[g][2]-t.zoomDataLevel[g-1][2])+t.zoomDataLevel[g-1][2];h(w)}let i=e.jsxs(e.Fragment,{children:[e.jsx("group",{name:"camera",children:e.jsx(ue,{makeDefault:!0,position:[0,l,0],rotation:[-Math.PI/2,0,0],fov:55,near:.001})}),e.jsx("group",{name:"lights",children:e.jsx(me,{files:"/imgs/environmental_map.hdr",background:!0,backgroundBlurriness:.6})}),e.jsxs("group",{name:"simulation",children:[e.jsx(de,{position:[.1,0,.3],rotation:[0,Math.PI*-.8,0],orientation:0}),e.jsx(mt,{position:[0,.32,.004],rotation:[0,Math.PI/2,0],scale:.02})]})]}),r=e.jsx(e.Fragment,{children:e.jsx(_,{label:"Zoom",value:n,onChange:c,min:0,max:1,step:.01,color:"#555555ff",displayValue:!1})});const s=j.useRef(null),[m,x]=j.useState(!1);return we(s,f=>{x(f)}),e.jsx(e.Fragment,{children:e.jsx(A,{FallbackComponent:gt,onError:C,children:e.jsxs("div",{className:"simulation-container",ref:s,children:[t.description&&e.jsxs("div",{className:"simulation-description",children:[e.jsx("div",{className:"simulation-description-title",children:t.title}),e.jsx("div",{className:"simulation-description-content",children:t.description})]}),e.jsxs("div",{className:"simulation-info-container",children:[e.jsx(qe,{aspectRatio:"11/9",show3DIcon:!1,customErrorComponent:ft,visible:m,children:i}),e.jsx("div",{className:"simulation-info-text",children:e.jsx("div",{children:e.jsx("p",{children:t.zoomDataLevel[o][1]})})})]}),e.jsx(De,{children:r})]})})})}function Le(t){const{nodes:n,materials:a}=Z("/models/spin.glb");return e.jsxs("group",{...t,dispose:null,children:[e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cylinder.geometry,material:a.Spin}),e.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cylinder_1.geometry,material:a.Atom})]})}Z.preload("/models/spin.glb");function jt(t){const[n,a]=[11,5],o=2.3,u=1,l=.8,h=5,[c,i,r,s,m]=j.useMemo(()=>{const x=[],f=j.createRef(),g=[],p=new Array(9).fill(t.rotation),w=[];for(let v=0;v<n;v++)for(let b=0;b<a;b++){const S=j.createRef();x.push(e.jsx(Le,{ref:S,position:[(v-n/2)*o+u,0,(b-a/2)*o+u],rotation:[0,t.rotation,0]},`secondary-${v}-${b}`)),g.push(S),w.push(Math.random()*(h-l)+l)}return x[Math.floor(n/2)*a+Math.floor(a/2)]=e.jsx(Le,{ref:f,position:[-.15,0,0],rotation:[0,t.rotation,0]},"primary"),[x,f,g,p,w]},[]);return Ze((x,f)=>{const g=i.current;g&&g.rotation.set(0,t.rotation,0),r.forEach((p,w)=>{const v=p.current;if(v){s[w]=t.rotation;const b=s[w]-v.rotation.y;v.rotation.set(0,v.rotation.y+b*m[w]*f,0)}})}),e.jsx(e.Fragment,{children:c})}function pt(t){const[n,a]=j.useState(!1),[o,u]=j.useState(.5);let l=e.jsx(jt,{rotation:o}),h=e.jsxs(e.Fragment,{children:[e.jsxs("group",{name:"camera",children:[e.jsx(ue,{makeDefault:!0,position:[0,13.5,0],fov:40}),e.jsx(ze,{})]}),e.jsx("group",{name:"lights",children:e.jsx(me,{files:"/imgs/environmental_map.hdr",background:!0,backgroundBlurriness:.6})}),e.jsx("group",{name:"simulation",children:l})]}),c=e.jsx(e.Fragment,{children:e.jsx(_,{label:"Rotation",value:o,onChange:u,min:0,max:Math.PI*2,step:.01,color:"#746cc0ff",displayValue:!1})});return e.jsx(H,{aspectRatio:"21/9",title:t.title,description:t.description,simulation:h,controls:c})}function wt(t,n,a,o,u,l){var h=o,c=u,i,r,s;t.beginPath(),t.moveTo(n,a),t.lineTo(o,u),t.stroke(),t.beginPath(),i=Math.atan2(u-a,o-n),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.moveTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),t.closePath(),t.fill()}function Ne(t,n,a){const{Nx:o,Ny:u,spins:l}=t,h=n%o,c=Math.floor(n/o),i=[{x:h-1,y:c},{x:h+1,y:c},{x:h,y:c-1},{x:h,y:c+1}];let r=0;i.forEach(({x:m,y:x})=>{m<0&&(m+=o),m>=o&&(m-=o),x<0&&(x+=u),x>=u&&(x-=u);const f=x*o+m;r+=l[f]?1:-1}),r=-r*(l[n]?1:-1);const s=a*.03;return r-=s*(l[n]?1:-1),r}function yt(t,n,a,o){const l=[...t.spins];for(let c=0;c<2e3;c++){const i=Math.floor(Math.random()*t.spins.length),r=2*Ne({Nx:t.Nx,Ny:t.Ny,spins:l},i,t.magFieldSign);l[i]=!l[i];let m=2*Ne({Nx:t.Nx,Ny:t.Ny,spins:l},i,t.magFieldSign)-r;if(!(m<=0)&&(a||o!=null)){let x=Math.random(),f=1/n;if(x<=Math.exp(-f*m))continue;l[i]=!l[i]}}let h=0;return l.forEach(c=>{h+=c?1:-1}),h/=l.length,[l,h]}function vt(t,n,a){t.fillStyle="white",t.clearRect(0,0,n.width,n.height);const o=1;a.spins.forEach((i,r)=>{const s=r%a.Nx*(n.width/a.Nx),m=Math.floor(r/a.Nx)*(n.height/a.Ny);i?t.fillStyle="#ff3235":t.fillStyle="#2939e2",t.fillRect(s,m,n.width/a.Nx+o,n.height/a.Ny+o)});const u=a.totalMagnetization,l=Math.abs(u*.9),h=7+25*l,c=Math.sign(u)==1?n.height*(.5-l/2):n.height-n.height*(.5-l/2);t.lineWidth=h,t.strokeStyle="white",t.fillStyle="white",t.lineJoin="bevel",wt(t,n.width-30,n.height/2,n.width-30,c,h*1.2)}function bt(t,n,a,o,u,l){let h=j.useMemo(()=>{const[s,m]=[200,Math.floor(200/n)],x=new Array(s*m).fill(!1).map(()=>Math.random()<.5),f=Math.random()<.5?1:-1;return{Nx:s,Ny:m,spins:x,magFieldSign:f}},[]),c=j.useRef(h.spins),i=j.useRef(0);j.useEffect(()=>{if(!l)return;const r=t.current;r||C(new Error("Canvas reference is null (Ising simulation)"));const s=r,m=window.devicePixelRatio||1,x=s.getBoundingClientRect(),f=x.width*m,g=x.height*m;s.width=f,s.height=g;const p=s.getContext("2d");p||C(new Error("Canvas context is null (Ising simulation)"));const w=p;let v;new Date().getTime();const b=()=>{new Date().getTime(),[c.current,i.current]=yt({Nx:h.Nx,Ny:h.Ny,spins:c.current,magFieldSign:h.magFieldSign},a,o,u),vt(w,{width:f,height:g},{Nx:h.Nx,Ny:h.Ny,spins:c.current,totalMagnetization:i.current}),v=window.requestAnimationFrame(b)};return b(),()=>{window.cancelAnimationFrame(v)}},[t,l])}function re(t){const[n,a]=j.useState(!1),[o,u]=j.useState(t.customT==null?7:t.customT),l=j.createRef(),h=j.useMemo(()=>16/9,[]);bt(l,h,o,t.useTemperature,t.customT,n);let c=e.jsx(e.Fragment,{children:e.jsx(_,{label:"Temperature",value:o,onChange:u,min:0,max:10,step:.01,color:"#6a5ff7",displayValue:!1})});return e.jsx(H,{aspectRatio:`${h}`,title:t.title,description:t.description,controls:t.useTemperature?c:e.jsx(e.Fragment,{}),canvasRef:l,onChangeVisibleState:a,is2D:!0})}function ie({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function Mt(t,n,a,o,u,l){var h=o,c=u,i,r,s;t.beginPath(),t.moveTo(n,a),t.lineTo(o,u),t.stroke(),t.beginPath(),i=Math.atan2(u-a,o-n),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.moveTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),t.closePath(),t.fill()}function Te(t){const n=t.magnetization,a=j.useRef(null);return j.useEffect(()=>{const o=a.current;o||C(new Error("Canvas reference is null (Ising Magnetization simulation)"));const u=o,l=window.devicePixelRatio||1,h=u.getBoundingClientRect(),c=h.width*l,i=h.height*l;u.width=c,u.height=i;const r=u.getContext("2d");r||C(new Error("Canvas context is null (Ising Magnetization simulation)"));const s=r,m=100,[x,f]=[m,Math.floor(m/(16/9))],g=Math.sign(n)==1?Math.abs(n):1-Math.abs(n),p=new Array(x*f).fill(!1).map(()=>Math.random()<(Math.abs(n)<.3?.5:g));s.fillStyle="white",s.clearRect(0,0,c,i);const w=1;p.forEach((N,T)=>{const R=T%x*(c/x),E=Math.floor(T/x)*(i/f);N?s.fillStyle="#ff3235":s.fillStyle="#2939e2",s.fillRect(R,E,c/x+w,i/f+w)});const v=n,b=Math.abs(v*.75),S=7/3+25/3*b,k=Math.sign(v)==1?i*(.5-b/2):i-i*(.5-b/2);s.lineWidth=S,s.strokeStyle="white",s.fillStyle="white",s.lineJoin="bevel",Mt(s,c-20,i/2,c-20,k,S*1.2)},[a,n]),e.jsx(e.Fragment,{children:e.jsx("canvas",{className:"simulation-canvas",ref:a})})}function St(t,n,a){const o=n.current?.clientWidth||100,l=Math.min(o*.8,380);t.current.setAttribute("width",o.toString()),t.current.setAttribute("height",l.toString());const h={top:20,right:20,bottom:45,left:50},c=o-h.left-h.right,i=l-h.top-h.bottom,r=ge(t.current).append("svg").attr("width",c+h.left+h.right).attr("height",i+h.top+h.bottom).append("g").attr("transform",`translate(${h.left},${h.top})`),s=(S,k)=>{if(S<1){const N=-((-S-1)/2*2+1);return k*Math.sqrt(1-N*N)}return 0},m=Y().domain([0,2]).range([0,c]).nice(),x=Y().domain([-1.05,1.05]).range([i,0]).nice();r.append("g").attr("transform",`translate(0, ${i})`).call(xe(m).ticks(c/80).tickSizeOuter(0)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),r.append("g").call(je(x).ticks(i/100).tickSizeOuter(0)),r.append("text").attr("text-anchor","middle").attr("x",c/2).attr("y",i+h.bottom-5).attr("fill","#6a5ff7").attr("font-size","16px").attr("font-weight","bold").text("Temperature"),r.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-i/2).attr("y",-35).attr("fill","#aa51df").attr("font-weight","bold").attr("font-size","16px").text("Magnetization");const f=pe().x(S=>m(S.x)).y(S=>x(S.y));r.append("path").attr("fill","none").attr("stroke","#aa51df").attr("stroke-width",4.5).attr("d",f(ae(0,2,.001).map(S=>({x:S,y:s(S,1)})))),r.append("path").attr("fill","none").attr("stroke","#aa51df").attr("stroke-width",4.5).attr("d",f(ae(0,2,.001).map(S=>({x:S,y:s(S,-1)}))));const g=200,p=m.invert(g),w=r.append("circle").attr("class","hover-point").attr("display","none").attr("r",8).attr("fill","#6a5ff7").attr("display","unset").attr("cx",g).attr("cy",x(s(p,1))),v=r.append("circle").attr("class","hover-point").attr("display","none").attr("r",8).attr("fill","#6a5ff7").attr("display","unset").attr("cx",g).attr("cy",x(s(p,-1)));a([s(p,1),s(p,-1)]);const b=r.append("line").attr("class","hover-line").attr("stroke","#6a5ff7").attr("stroke-width",3).attr("stroke-dasharray","5,5").attr("x1",g).attr("y1",0).attr("x2",g).attr("y2",i);r.append("rect").attr("x",0).attr("y",0).attr("width",c).attr("height",i).attr("fill","transparent").on("mousemove",function(S){const[k,N]=fe(S),T=x.invert(N);if(T>=-1&&T<=1){const R=m.invert(k);b.attr("x1",k).attr("y1",0).attr("x2",k).attr("y2",i);const E=s(R,1);w.attr("display","unset").attr("cx",k).attr("cy",x(E));const F=s(R,-1);v.attr("display","unset").attr("cx",k).attr("cy",x(F)),a([Math.abs(E)<.001?Math.random()*1e-5:E,Math.abs(F)<.001?Math.random()*1e-5:F])}})}function kt(t){const n=j.useRef(null),a=j.useRef(null),[o,u]=j.useState([0,0]);return j.useEffect(()=>{St(a,n,u)},[a]),e.jsx(e.Fragment,{children:e.jsx(A,{FallbackComponent:ie,onError:C,children:e.jsxs("div",{className:"ising-simulation-container",children:[t.title&&t.description&&e.jsxs("div",{className:"simulation-description",children:[e.jsx("div",{className:"simulation-description-title",children:t.title}),e.jsx("div",{className:"simulation-description-content",children:t.description})]}),e.jsxs("div",{className:"ising-graph-simulation-container",children:[e.jsx("div",{className:"ising-graph-canvas-container-up",children:e.jsx(A,{FallbackComponent:ie,onError:C,children:e.jsx(Te,{magnetization:o[0]})})}),e.jsx("div",{ref:n,className:"ising-graph-canvas-container-svg",children:e.jsx(A,{FallbackComponent:ie,onError:C,children:e.jsx("svg",{width:460,height:400,ref:a})})}),e.jsx("div",{className:"ising-graph-canvas-container-down",children:e.jsx(A,{FallbackComponent:ie,onError:C,children:e.jsx(Te,{magnetization:o[1]})})})]})]})})})}function L(t){return e.jsx(ve,{from:[255,50,53],to:[41,57,226],bold:t.bold,italic:t.italic,children:t.children})}function Lt(){return e.jsxs(te,{title:"From the physics of magnetism...",children:[e.jsxs(z,{title:"What is a magnet?",children:[e.jsxs(M,{children:["Before diving into the ",e.jsx("strong",{children:"science of complexity"}),", let's start by exploring a simple yet fascinating example: ",e.jsx(L,{children:"magnets"}),". You will see that this example is not only interesting in itself, but also serves as a perfect introduction."]}),e.jsx(W,{children:"What is a magnet? Really, try to give a definition."}),e.jsx(M,{children:"Your first instinct might be something like"}),e.jsxs(ke,{children:["A ",e.jsx(L,{children:"magnet"})," is an object with a positive and a negative pole that attracts or repels other magnets."]}),e.jsx(at,{title:"Magnets attraction and repulsion",description:e.jsx(e.Fragment,{children:e.jsxs(M,{children:["Here below is an ",e.jsx("strong",{children:"interactive simulation"})," of this first definition. Use the ",e.jsx(d,{type:"magnets-slider",bold:!0,children:"slider"})," to change the ",e.jsx(d,{type:"magnets-slider",children:"distance between the magnets"}),", and release it to see the effect. You can also ",e.jsxs("i",{children:["click on a ",e.jsx(L,{children:"magnet"})]})," to ",e.jsxs("i",{children:["change its ",e.jsx(L,{children:"orientation"})]}),"."]})})}),e.jsx(W,{children:"But let's ask again: What is a magnet, really?"}),e.jsxs(M,{children:["I'm not sure about you, but I find this definition a bit unsatisfactory. Moreover, this definition doesn't explain some properties:",e.jsxs("ul",{children:[e.jsxs("li",{children:["Why, when you ",e.jsx("i",{children:e.jsxs("strong",{children:["cut a ",e.jsx(L,{bold:!0,italic:!0,children:"magnet"})," in half"]})}),", do you end up with ",e.jsx("strong",{children:"two"})," ",e.jsx(L,{bold:!0,italic:!0,children:"magnets"}),"? Why can't we split a magnet into a ",e.jsx(d,{type:"magnet-north",italic:!0,children:"north-only"})," and a ",e.jsx(d,{type:"magnet-south",italic:!0,children:"south-only"})," piece?"]}),e.jsxs("li",{children:["Moreover, have you noticed that when a ",e.jsx(L,{children:"magnet"})," gets ",e.jsx(d,{type:"temperature",bold:!0,children:"hot"}),", it stops working? Why does this happen?"]})]})]}),e.jsx(M,{children:"In this first part, we'll explore all of these. As you'll see, the explanation is more subtle than it might appear, and it will lead us into some fascinating concepts in physics."})]}),e.jsxs(z,{title:"Zooming into matter",children:[e.jsx(xt,{title:"Zooming on a magnet",description:e.jsxs(M,{children:["Let's start our next ",e.jsx("strong",{children:"interactive simulation"})," by ",e.jsxs("i",{children:["zooming on a ",e.jsx(L,{children:"magnet"})]})," to uncover what lies inside. Use the ",e.jsx(d,{type:"zoom-slider",bold:!0,children:"slider"})," below to zoom in and out."]}),zoomDataLevel:[[0,e.jsxs(e.Fragment,{children:["A simple ",e.jsx(L,{italic:!0,children:"magnet"})," with a ",e.jsx(d,{type:"magnet-north",bold:!0,children:"positive"})," and ",e.jsx(d,{type:"magnet-south",bold:!0,children:"negative"})," pole."]}),6],[.3,e.jsxs(e.Fragment,{children:["A simple ",e.jsx(L,{children:"magnet"})," with a ",e.jsx(d,{type:"magnet-north",children:"positive"})," and ",e.jsx(d,{type:"magnet-south",children:"negative"})," pole."]}),.65],[.5,e.jsxs(e.Fragment,{children:["Each ",e.jsx(L,{italic:!0,children:"magnet"})," is made of atoms arranged in a ",e.jsx("strong",{children:"very specific, orderly way"}),"."]}),.65],[.7,e.jsxs(e.Fragment,{children:["Each ",e.jsx("strong",{children:"atom"})," in the magnet can be seen as a ",e.jsxs("strong",{children:["tiny arrow-like ",e.jsx(L,{children:"magnet"})]}),", where the ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"tip"})," of the arrow indicates the ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"north"}),"."]}),.38],[1,e.jsxs(e.Fragment,{children:["Each ",e.jsx("strong",{children:"atom"})," in the magnet can be seen as a ",e.jsxs("strong",{children:["tiny arrow-like ",e.jsx(L,{children:"magnet"})]}),", where the ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"tip"})," of the arrow indicates the ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"north"}),"."]}),.38]]}),e.jsxs(W,{children:["So... are ",e.jsx("strong",{children:"atoms"})," really tiny magnets?"]}),e.jsxs(M,{children:["I mean... ",e.jsx("i",{children:"sort of!"})," In fact, there are two different sources of magnetism in an atom:",e.jsxs("ul",{children:[e.jsxs("li",{children:["Each ",e.jsx("strong",{children:"electron"})," has a property called ",e.jsx(d,{type:"electron",bold:!0,children:"spin"}),". Imagine it as a tiny arrow attached to the electron, pointing in a certain direction ",e.jsx("i",{children:"... although the electron doesn't literally spin"}),". This ",e.jsx(d,{type:"electron",italic:!0,children:"arrow"})," produces its own ",e.jsx(L,{italic:!0,children:"magnetism"}),", just like a tiny magnet."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Electrons"})," also move around the nucleus. Since a ",e.jsx(d,{type:"electron",italic:!0,children:"moving electric charge"})," creates ",e.jsx(L,{italic:!0,children:"magnetism"})," (this is what's called ",e.jsx("i",{children:"induction"}),"), this motion also contributes to the atom's overall magnetism."]})]}),"In short, let's simplify and think of ",e.jsx("strong",{children:"atoms"})," as ",e.jsx(L,{bold:!0,italic:!0,children:"tiny arrow-shaped magnets"}),"."]}),e.jsx(M,{children:"Now, a magnet contains an enormous number of electrons... and even more atoms! So the real question is"}),e.jsxs(W,{children:["How do all these ",e.jsx(L,{italic:!0,children:"tiny arrows"})," end up ",e.jsx("strong",{children:"working together"}),"? Shouldn't they just point in random directions, canceling each other out? And this is where the magic starts."]}),e.jsx(pt,{}),e.jsxs(M,{children:["As you can see, ",e.jsx(d,{type:"electron",bold:!0,italic:!0,children:"atom's spins"})," prefer to ",e.jsxs("strong",{children:["point in the ",e.jsx(d,{type:"electron",children:"same direction as their neighbors"})]}),"."]}),e.jsxs(J,{title:"A deeper look",children:[e.jsxs(M,{children:["To understand why, we need to dip into the realm of ",e.jsx("i",{children:"quantum physics"}),". At very small scales, ",e.jsx(d,{type:"particle",bold:!0,children:"particules"})," are not just tiny balls ; they are described by a mathematical object called a ",e.jsx(d,{type:"particle",bold:!0,children:"wave function"}),". Think of it as a sort of fuzzy cloud that represents the ",e.jsx(d,{type:"particle",italic:!0,children:"probability of finding the particle in a certain place"}),". Like water waves, two wave functions can interfere, combining to make form bigger waves or canceling each other out."]}),e.jsxs(M,{children:["Since ",e.jsx(d,{type:"electron",bold:!0,children:"electrons"})," all carry the same ",e.jsx(d,{type:"electron",italic:!0,children:"negative charge"}),", they repel each other. In a solid, the ",e.jsx("strong",{children:"Pauli exclusion principle"})," forces their wave functions into certain arrangements. In some cases, the lowest-energy state occurs when neighboring ",e.jsx(d,{type:"electron",bold:!0,children:"spins are aligned"}),". This effect is called the ",e.jsx("i",{children:"exchange interactions"}),'. It is not a new "fundamental" force, but rather a consequence of the wave nature of particles and their interactions.']})]}),e.jsxs(G,{children:["Ok, that's a lot to take in. Let's put on our theorist hat. ",e.jsxs("i",{children:["How could we ",e.jsx("strong",{children:"summarise"})," what we have learnt so far, simplifying as much as possible, ",e.jsx("strong",{children:"without loosing the essence of the physics behind"}),"?"]}),e.jsx(K,{}),"Try to think about it a bit. These parts are the real challenge of this article!"]}),e.jsxs(M,{children:["Let's strip this down to its essence. A ",e.jsx(L,{bold:!0,children:"magnet"})," consists of ",e.jsx(L,{italic:!0,children:"many atoms"})," arranged in a ",e.jsx(L,{italic:!0,children:"regular pattern"}),".",e.jsxs("ul",{children:[e.jsxs("li",{children:["Suppose we have ",e.jsxs("i",{children:[e.jsx(y,{children:"N"})," atoms"]}),", that we identify using the letter ",e.jsx(y,{children:"j"})," that runs from ",e.jsx(y,{children:"1"})," to ",e.jsx(y,{children:"N"}),"."]}),e.jsxs("li",{children:["To simplify, we model each atom as a single arrow pointing in a given direction. We call this the ",e.jsx(d,{type:"electron",bold:!0,children:"atom's spin"}),", and write it as ",e.jsx(y,{type:"electron",children:"S_j"}),"."]}),e.jsxs("li",{children:["Let's make it even simpler: Suppose each arrow can only point ",e.jsx(d,{type:"magnet-north",bold:!0,children:"up"})," that we write as ",e.jsx(y,{children:"S_j =\\,"}),e.jsx(d,{type:"magnet-north",children:e.jsx(y,{children:"+1"})}),", or ",e.jsx(d,{type:"magnet-south",bold:!0,children:"down"})," where ",e.jsx(y,{children:"S_j =\\,"}),e.jsx(y,{type:"magnet-south",children:"-1"}),"."]}),e.jsxs("li",{children:["Finally, ",e.jsx("i",{children:"most importantly"}),", we describe the evolution of our system over time by saying that ",e.jsxs("i",{children:[e.jsx("strong",{children:"each spin"})," prefers to ",e.jsx("strong",{children:"align with its nearest neighbors"}),"."]})]})]})]}),e.jsxs(J,{title:"Energy minimization",children:[e.jsxs(M,{children:["In physics, a core principle is that systems tend to ",e.jsx("i",{children:"minimize their energy"}),". In our case, the ",e.jsx("strong",{children:"energy"})," of a given atom ",e.jsx(y,{children:"j"})," can be written as",e.jsx($,{children:"$$ E_j = - J \\sum_{j'\\ \\in\\ \\mathrm{neighbors\\  of\\ } j} S_j\\, S_{j'}, $$"}),"where ",e.jsx(y,{children:"J"})," is a positive constant that represents the ",e.jsx("i",{children:"strength of the interaction between neighboring arrows"}),". From this relation, if ",e.jsx(y,{children:"S_j"})," and ",e.jsx($,{inline:!0,children:"$S_{j'}$"})," are aligned (both ",e.jsx(y,{type:"magnet-north",children:"+1"})," or both ",e.jsx(y,{type:"magnet-south",children:"-1"}),"), the energy is ",e.jsx("i",{children:"negative"}),", meaning that this configuration is ",e.jsx("i",{children:"better for the system"}),". If they are opposite, the energy is ",e.jsx("i",{children:"positive"}),". This means that, as we wanted, the system ",e.jsx("strong",{children:"prefers to align"})," the ",e.jsx(d,{type:"electron",children:"spins"}),"."]}),e.jsxs(M,{children:["In quantum mechanics, ",e.jsx("strong",{children:"energy minimization"})," is a fundamental principle. Instead of talking about the total energy ",e.jsx(y,{children:"E"})," of the system, we use the letter ",e.jsx(y,{children:"H"})," and call it the ",e.jsx(L,{bold:!0,children:"Hamiltonian"}),". Here, it is the sum of the energies of all the atoms in the system:",e.jsx($,{children:"$$ H = - J \\sum_{j=1}^N \\sum_{j'\\, \\in\\, \\mathrm{neighbors\\  of\\ } j} S_j\\, S_{j'}. $$"})]})]}),e.jsxs(W,{children:["But how do we actually ",e.jsx("strong",{children:"measure"})," the magnetism of a magnet?"]}),e.jsxs(M,{children:["For this, we need to define the ",e.jsx(L,{bold:!0,children:"total magnetization"})," that we write as ",e.jsx(y,{children:"M"}),", which is what we usually mean when we talk about ",e.jsx("strong",{children:"how strong"})," a magnet is. It is simply the average of all the spins' orientations",e.jsx($,{children:"$$ M = \\frac{1}{N} \\sum_{j=1}^N S_j. $$"})]}),e.jsxs(q,{children:["The division by ",e.jsx(y,{children:"N"})," keeps ",e.jsx(y,{children:"M"})," between ",e.jsx(y,{type:"magnet-north",children:"+1"})," and ",e.jsx(y,{type:"magnet-south",children:"-1"}),", making it easy to interpret."]}),e.jsxs(M,{children:[e.jsx("strong",{children:"And... voil√†!"})," Below is what we get."]}),e.jsx(re,{title:"Magnets simulation",description:e.jsxs(M,{children:["This is a ",e.jsx("strong",{children:"simulation"})," of the model we just built. It shows a grid of arrows, each representing an ",e.jsx("i",{children:"atom's spin"}),". A ",e.jsx(d,{type:"magnet-north",children:"red"})," arrow represents a spin pointing ",e.jsx(d,{type:"magnet-north",bold:!0,children:"up"})," (",e.jsx(y,{children:"S_j =\\,"}),e.jsx(y,{type:"magnet-north",children:"+1"}),"), while a ",e.jsx(d,{type:"magnet-south",children:"blue"})," arrow represents a spin pointing ",e.jsx(d,{type:"magnet-south",bold:!0,children:"down"})," (",e.jsx(y,{children:"S_j =\\,"}),e.jsx(y,{type:"magnet-south",children:"-1"}),").",e.jsx(K,{}),"Finally, the ",e.jsx("strong",{children:"big arrow"})," on the side represents the ",e.jsx(L,{italic:!0,children:"total magnetization"})," ",e.jsx(y,{children:"M"})," of the system, which is the average of all the spins' orientations. The ",e.jsx("i",{children:"bigger"})," it is, the ",e.jsx("i",{children:"stronger"})," the magnet."]})}),e.jsxs(M,{children:["Nice, we have our model... or do we really? It looks a bit ",e.jsx("strong",{children:"chaotic"}),"... The ",e.jsx(L,{bold:!0,italic:!0,children:"total magnetization"})," is always close to zero, meaning that we never have ",e.jsx(L,{italic:!0,children:"magnet"}),"! Still, let's look at our checklist of what we wanted to simulate:",e.jsx(ht,{items:[{label:"North and south poles.",checked:!0,description:"The magnetization, represented by the big arrow."},{label:"Attraction and repulsion between magnets.",checked:!0,description:"If we had another magnet, their big arrows would tend to align together."},{label:"Cutting a magnet in two.",checked:!0,description:"Each half still has its own big arrow, so each is still a magnet."},{label:"Magnets stop working when hot.",checked:!1}]})]}),e.jsxs(M,{children:["Crap! We still have one thing to explain: ",e.jsxs("strong",{children:["Why does ",e.jsx(d,{type:"temperature",children:"heating"})," destroy magnetism?"]})]}),e.jsxs(W,{children:["But... will just ",e.jsx(d,{type:"temperature",bold:!0,italic:!0,children:"adding temperature"})," to our model solve everything?"]}),e.jsxs(G,{children:[e.jsx("i",{children:"That's how theory works!"})," You build a model, see where it matches reality, and then notice where it doesn't. You then try to ",e.jsx("strong",{children:"fix"})," the model by ",e.jsx("strong",{children:"adding new elements"})," that you think will help.",e.jsx(K,{}),e.jsx(K,{}),"Now, here's your challenge: ",e.jsxs("i",{children:["how would you add ",e.jsx(d,{type:"temperature",children:"temperature"})," to our model? What effect do you think it would have on each arrow?"]})]})]}),e.jsxs(z,{title:"The crucial role of temperature",children:[e.jsxs(M,{children:[e.jsx(d,{type:"temperature",bold:!0,children:"Temperature"}),", that we will write using the letter ",e.jsx(y,{type:"temperature",children:"T"}),", can be thought of as ",e.jsx("i",{children:"shaking the arrows"}),". In this article, we will also call it more generally ",e.jsx(d,{type:"temperature",bold:!0,children:"noise"}),". The ",e.jsx("i",{children:"higher the temperature"}),", the more the ",e.jsx("i",{children:"spins jostle"}),"."]}),e.jsxs(M,{children:["In our model, to include ",e.jsx(d,{type:"temperature",bold:!0,children:"temperature"}),", we imagine the system evolving according to the following steps:",e.jsx(dt,{items:[e.jsxs(e.Fragment,{children:["Pick a random atom ",e.jsx(y,{children:"j"})," anywhere in the grid."]}),e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Consider flipping its arrow"}),", but don't actually do it yet. First, check how this change would affect the system.",e.jsxs("ul",{children:[e.jsxs("li",{children:["If the flip ",e.jsx("i",{children:"increases"})," alignment with neighbors, ",e.jsx("strong",{children:"accept."})]}),e.jsxs("li",{children:["If it ",e.jsx("i",{children:"decreases"})," alignment, don‚Äôt reject it outright. Instead, generate a ",e.jsx(d,{type:"temperature",children:"random number"})," that depends on ",e.jsx(y,{type:"temperature",children:"T"}),". At higher ",e.jsx(y,{type:"temperature",children:"T"}),", this number is more likely to be ",e.jsx("i",{children:"large"}),". If the random number exceeds a threshold, ",e.jsx("strong",{children:"accept it."})," This represents the effect of ",e.jsx(d,{type:"temperature",children:"thermal fluctuations"})," that can sometimes overcome the alignment."]})]})]}),e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Repeat many times"})," in random order."]})]})]}),e.jsx(q,{children:"This is called a Monte-Carlo simulation, a powerful physics method."}),e.jsxs(M,{children:[e.jsx("i",{children:"Enough theory!"})," Let's see what happens with ",e.jsx(d,{type:"temperature",children:"temperature"})," in practice."]}),e.jsx(re,{title:"Ising Model",description:e.jsxs(M,{children:["The implementation of the above algorithm. Try to ",e.jsx(d,{type:"temperature",bold:!0,children:"change the temperature"})," using the ",e.jsx(d,{type:"temperature-slider",italic:!0,children:"slider"})," below."]}),useTemperature:!0}),e.jsxs(M,{children:["That's better! At ",e.jsx(d,{type:"temperature",bold:!0,children:"high"})," ",e.jsx(y,{type:"temperature",children:"T"}),", the arrows are ",e.jsx(d,{type:"temperature",italic:!0,children:"jumbled"}),", and the ",e.jsx(d,{type:"magnet",children:"total magnetization"})," is zero ",e.jsx(y,{type:"magnet",children:"M \\simeq 0"})," as before. However, ",e.jsx(d,{type:"temperature",bold:!0,children:"below"})," a certain temperature, the arrows suddenly ",e.jsx(d,{type:"temperature",italic:!0,children:"align"}),", and ",e.jsx(y,{type:"magnet",children:"M \\simeq \\pm 1"}),". In this case, we have a ",e.jsx(L,{bold:!0,children:"magnet"}),"!"]}),e.jsxs(q,{children:["Below this ",e.jsx("i",{children:"critical temperature"}),", we observe ",e.jsx("strong",{children:"patches"})," of aligned spins. These patches are called ",e.jsx("strong",{children:"magnetic domains"}),",  and are a ",e.jsx("a",{href:"https://en.wikipedia.org/wiki/Magnetic_domain",children:"key feature of real magnets"}),". Our model even made a new prediction that is experimentally found!"]}),e.jsxs(M,{children:["Now, let's try to better characterize what's happening. To do this, we will measure this total magnetization ",e.jsx(y,{type:"magnet",children:"M"})," more precisely for different temperatures ",e.jsx(y,{type:"temperature",children:"T"})," and plot it on a graph."]}),e.jsx(kt,{title:"Magnetization temperature variation",description:e.jsxs(M,{children:["Try ",e.jsx("i",{children:"moving your cursor"})," along the ",e.jsx(d,{type:"temperature",italic:!0,bold:!0,children:"temperature"})," axis to see how the ",e.jsx(L,{italic:!0,bold:!0,children:"magnets internal structure"})," changes and how the ",e.jsx(d,{type:"magnet",italic:!0,bold:!0,children:"total magnetization"})," varies."]})}),e.jsxs(M,{children:["We observe what we saw earlier: there is a ",e.jsxs("strong",{children:["sudden change in the magnetization at a ",e.jsx(d,{type:"temperature",bold:!0,italic:!0,children:"certain temperature"})," ",e.jsx(y,{type:"temperature",children:"T_c"})]}),", which we call the critical temperature:",e.jsxs("ul",{children:[e.jsxs("li",{children:["For ",e.jsx($,{inline:!0,children:"$T < \\, $"}),e.jsx(d,{type:"temperature",children:e.jsx($,{inline:!0,children:"$T_c$"})}),", the magnet is ",e.jsx(d,{type:"magnet",bold:!0,children:"ordered"}),", with ",e.jsx(y,{type:"magnet",children:"M \\simeq \\pm 1"}),". This means that the arrows are aligned, and the magnet ",e.jsx("i",{children:"works"}),'".']}),e.jsxs("li",{children:["For ",e.jsx($,{inline:!0,children:"$T > \\, $"}),e.jsx(d,{type:"temperature",children:e.jsx($,{inline:!0,children:"$T_c$"})}),", it is ",e.jsx(d,{type:"magnet",bold:!0,children:"disordered"}),", with ",e.jsx(y,{type:"magnet",children:"M \\simeq 0"}),". This means that the arrows are jumbled, and the magnet ",e.jsx("i",{children:"doesn't work"}),"."]})]}),"This process is called a ",e.jsx("strong",{children:"phase transition"}),", and it is a fundamental concept in physics. Here, it explains why magnets stop working when overheated: the ",e.jsx(d,{type:"temperature",italic:!0,children:"thermal fluctuations"})," become so strong that they win compared to the ",e.jsx(d,{type:"magnet",italic:!0,children:"alignment of the arrows"}),", leading to a ",e.jsx("i",{children:"disordered"})," state and killing the magnetism. Another phase transition you know occurs while boiling water. At 100¬∞C, the water abruptly changes from ",e.jsx("i",{children:"liquid"})," to a ",e.jsx("i",{children:"gas"}),"."]}),e.jsxs(q,{children:["The model we used here is the ",e.jsx("strong",{children:"Ising model"}),". Despite its simplicity, it is a ",e.jsx("strong",{children:"cornerstone"})," of statistical physics and complexity science. A lot of research has been and continues to be conducted on this model and its variants."]})]}),e.jsx(U,{}),e.jsxs(z,{children:[e.jsxs(M,{children:["To finish this first part, let me insist again on what we just saw. ",e.jsx(L,{children:"Magnets"})," are made of countless atoms, each with its own tiny magnetic arrow that we call ",e.jsx(d,{type:"electron",children:"spin"}),".",e.jsx(K,{}),e.jsx(K,{}),"A priori, we expected that these arrows would point in ",e.jsx("strong",{children:"random directions"}),", canceling each other out. However, this is only what happens at ",e.jsx(d,{type:"temperature",bold:!0,children:"high temperatures"}),". ",e.jsx(d,{type:"temperature",bold:!0,children:"Below a certain temperature"}),", the atoms' spins suddenly start to ",e.jsx("strong",{children:"cooperate and work together"}),", aligning themselves in the same direction and as a result producing what we call ",e.jsx(L,{children:"magnets"}),". This sudden change is called a ",e.jsx(L,{bold:!0,italic:!0,children:"phase transition"}),", and it is a fundamental concept in physics."]}),e.jsx(re,{title:"Ising Model",useTemperature:!0}),e.jsxs(M,{children:["We saw that even with constant ",e.jsx(d,{type:"temperature",italic:!0,children:"local disorder"})," and ",e.jsx(d,{type:"temperature",italic:!0,children:"independent individuals"}),", a ",e.jsx("strong",{children:"collective order"})," can emerge. This is a key idea in the ",e.jsx("i",{children:"science of complexity"}),":"]}),e.jsxs(ke,{children:[e.jsx(L,{bold:!0,children:"Simple rules"})," at the scale of a ",e.jsx("i",{children:"few individuals"})," can give rise to rich and ",e.jsx(L,{bold:!0,children:"complex"})," organizational patterns at ",e.jsx("i",{children:"large scales"}),"."]})]})]})}function Nt(t,n,a,o,u,l){var h=o,c=u,i,r,s;t.beginPath(),t.moveTo(n,a),t.lineTo(o,u),t.stroke(),t.beginPath(),i=Math.atan2(u-a,o-n),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.moveTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),t.closePath(),t.fill()}function Ce(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function Tt(t,n){const a=1-Math.random(),o=Math.random();return Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*o)*n+t}function Ct(t,n,a,o,u){return t.map(l=>(l-n)*(u-o)/(a-n)+o)}function Rt(t,n,a,o,u){const h=[...t.posList],c=[...t.velList],i=[...t.thetaList];if(u==null){const s=new Array(h.length).fill(0).map(()=>[]);h.forEach((m,x)=>{h.forEach((f,g)=>{if(x!==g){const p=Math.abs(m[0]-f[0]),w=Math.abs(m[1]-f[1]),v=p>.5?1-p:p,b=w>.5?1-w:w;Math.hypot(v,b)<.2&&s[x].push(g)}})}),i.forEach((m,x)=>{const f=s[x];if(f.length>0){const g=f.reduce((p,w)=>{const v=i[w];return p+Math.sin(v-m)},0)/f.length;i[x]=m+a*g+Math.sqrt(n)*.1*Tt(0,10)*o}i[x]=(i[x]+2*Math.PI)%(2*Math.PI)})}else i.forEach((r,s)=>{i[s]=r,i[s]=(i[s]+2*Math.PI)%(2*Math.PI)});return h.forEach((r,s)=>{const m=t.velList[s],x=i[s];r[0]+=m*o*Math.cos(x),r[1]+=m*o*Math.sin(x),r[0]=(r[0]+1)%1,r[1]=(r[1]+1)%1}),[h,c,i]}function It(t,n,a,o,u){if(t.fillStyle="#dfe6fcff",t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height),!o)a.posList.forEach((l,h)=>{const c=Ce(l,n),i=a.thetaList[h];t.lineWidth=2,t.strokeStyle="#002763ff",t.beginPath();const r=15;t.arc(c.x,c.y,r,0,2*Math.PI),t.stroke(),t.lineWidth=2,t.fillStyle="#002763ff";const s=r*.65;Nt(t,c.x,c.y,c.x+s*Math.cos(i),c.y+s*Math.sin(i),4)});else{const l=new Path2D("m 0,-55.361361 c -7.233624,0 -10.636408,16.309314 -11.276832,32.038875 0,0 -10.724855,13.7182701 -7.731827,16.9607201 2.298053,2.48955 6.066415,-3.9166901 7.692553,-7.0259301 0.124074,3.6295296 0.402629,7.0012301 0.819589,9.8603801 1.724739,11.82679 4.520187,26.0693599 7.10159,38.7227599 -0.728472,2.83258 -0.274272,5.35692 -2.141686,6.45639 -7.700014,4.53352 -12.889653,4.97487 -12.889653,10.10843 0,5.72617 14.482276,5.31951 18.426266,0.85421 3.94399,4.4653 18.426265,4.87196 18.426265,-0.85421 0,-5.13356 -5.189632,-5.57491 -12.889653,-10.10843 -1.86741,-1.09947 -1.912058,-3.87323 -2.32875,-6.39403 2.5814,-12.6534 5.563913,-26.9583299 7.288654,-38.7851199 0.41696,-2.85915 0.695509,-6.2308505 0.819589,-9.8603801 1.62613,3.10924 5.394503,9.5154801 7.692553,7.0259301 2.99303,-3.24245 -7.731827,-16.9607201 -7.731827,-16.9607201 C 10.636411,-39.052049 7.23363,-55.361361 0,-55.361361 Z");a.posList.forEach((h,c)=>{const i=Ct(h,0,1,-.05,1.05);t.save();const r=Ce(i,n),s=a.thetaList[c];t.translate(r.x,r.y);const m=u==null?.25:.15;t.scale(m,m),t.rotate(s+1.7),t.fillStyle="#002763ff",t.fill(l),t.restore()})}}function Et(t,n,a,o,u,l,h,c){const r=h==null?20:13,[s,m]=[r,Math.floor(r/n)];let x=j.useRef(new Array(r).fill(!1).map(()=>[0,0])),f=j.useRef(new Array(r).fill(!1).map(()=>0)),g=j.useRef(new Array(r).fill(!1).map(()=>0)),p=j.useMemo(()=>Math.random()*2*Math.PI,[]);j.useMemo(()=>{const w=new Array(s*m).fill(!1).map(()=>[Math.random(),Math.random()]),v=new Array(s*m).fill(!1).map(()=>.15*(.2+Math.random()*.8));x.current=w,f.current=v},[]),j.useMemo(()=>{const w=new Array(s*m).fill(!1).map(()=>h==null?Math.random()*2*Math.PI:Math.random()<h?p:Math.random()*2*Math.PI);g.current=w},[h]),j.useEffect(()=>{if(!c)return;const w=t.current;w||C(new Error("Canvas reference is null (Kuramoto simulation)"));const v=w,b=window.devicePixelRatio||1,S=v.getBoundingClientRect(),k=S.width*b,N=S.height*b;v.width=k,v.height=N;const T=v.getContext("2d");T||C(new Error("Canvas context is null (Kuramoto simulation)"));const R=T;let E,F=new Date().getTime();const D=()=>{const V=new Date().getTime(),O=(V-F)/1e3;F=V,[x.current,f.current,g.current]=Rt({posList:x.current,thetaList:g.current,velList:f.current},a,o,O,h),It(R,{width:k,height:N},{posList:x.current,velList:f.current,thetaList:g.current},l,h),E=window.requestAnimationFrame(D)};return D(),()=>{window.cancelAnimationFrame(E)}},[t,c])}function oe(t){const[n,a]=j.useState(!1),[o,u]=j.useState(10),[l,h]=j.useState(!0),[c,i]=j.useState(.3),r=j.createRef(),s=j.useMemo(()=>16/9,[]);j.useMemo(()=>{t.showSliders||(u(7),i(1.5))},[t.showSliders]),Et(r,s,o,c/50,t.showSliders,l,t.synchronisation,n);let m=e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fish-custom-check-g-container",children:e.jsxs("div",{className:"fish-custom-check-container",children:[e.jsx("label",{htmlFor:"show-arrows",children:"Arrows"}),e.jsx("input",{type:"checkbox",checked:!l,onChange:x=>h(!x.target.checked)})]})}),e.jsx(_,{label:"Temperature",value:o,onChange:u,min:0,max:20,step:.01,color:"#6a5ff7",displayValue:!1}),e.jsx(_,{label:e.jsx(e.Fragment,{children:"¬†¬†¬†Interaction"}),value:c,onChange:i,min:0,max:2,step:.001,color:"#12a02a",displayValue:!1})]});return e.jsx(H,{aspectRatio:`${s}`,title:t.title,description:t.description,controls:t.showSliders?m:e.jsx(e.Fragment,{}),canvasRef:r,onChangeVisibleState:a,is2D:!0})}function le({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function Pt(t,n,a){const o=n.current?.clientWidth||100,l=Math.min(o*.8,380);t.current.setAttribute("width",o.toString()),t.current.setAttribute("height",l.toString());const h={top:20,right:20,bottom:45,left:50},c=o-h.left-h.right,i=l-h.top-h.bottom,r=ge(t.current).append("svg").attr("width",c+h.left+h.right).attr("height",i+h.top+h.bottom).append("g").attr("transform",`translate(${h.left},${h.top})`),s=b=>{if(b>1){const S=(b-1)*.8-1;return Math.sqrt(1-S*S)}return 0},m=Y().domain([0,2]).range([0,c]).nice(),x=Y().domain([-.05,1.05]).range([i,0]).nice();r.append("g").attr("transform",`translate(0, ${i})`).call(xe(m).ticks(c/80).tickSizeOuter(0)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),r.append("g").call(je(x).ticks(i/100).tickSizeOuter(0)),r.append("text").attr("text-anchor","middle").attr("x",c/2).attr("y",i+h.bottom-5).attr("fill","#12a02a").attr("font-size","16px").attr("font-weight","bold").text("Interaction strength"),r.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-i/2).attr("y",-35).attr("fill","#2c2c2cff").attr("font-weight","bold").attr("font-size","16px").text("Synchronisation amount");const f=pe().x(b=>m(b.x)).y(b=>x(b.y));r.append("path").attr("fill","none").attr("stroke","#2c2c2cff").attr("stroke-width",4.5).attr("d",f(ae(0,2,.001).map(b=>({x:b,y:s(b)}))));const g=200,p=m.invert(g),w=r.append("circle").attr("class","hover-point").attr("display","none").attr("r",8).attr("fill","#12a02a").attr("display","unset").attr("cx",g).attr("cy",x(s(p)));a(s(p));const v=r.append("line").attr("class","hover-line").attr("stroke","#12a02a").attr("stroke-width",3).attr("stroke-dasharray","5,5").attr("x1",g).attr("y1",0).attr("x2",g).attr("y2",i);r.append("rect").attr("x",0).attr("y",0).attr("width",c).attr("height",i).attr("fill","transparent").on("mousemove",function(b){const[S,k]=fe(b),N=x.invert(k);if(N>=-1&&N<=1){const T=m.invert(S);v.attr("x1",S).attr("y1",0).attr("x2",S).attr("y2",i);const R=s(T);w.attr("display","unset").attr("cx",S).attr("cy",x(R)),a(R<.001?Math.random()*1e-5:R)}})}function At(t){const n=j.useRef(null),a=j.useRef(null),[o,u]=j.useState(0),l=j.useMemo(()=>e.jsx(oe,{showSliders:!1,synchronisation:o}),[o]);return j.useEffect(()=>{Pt(a,n,u)},[a]),e.jsx(e.Fragment,{children:e.jsx(A,{FallbackComponent:le,onError:C,children:e.jsxs("div",{className:"fish-simulation-container",children:[t.title&&t.description&&e.jsxs("div",{className:"simulation-description",children:[e.jsx("div",{className:"simulation-description-title",children:t.title}),e.jsx("div",{className:"simulation-description-content",children:t.description})]}),e.jsxs("div",{className:"fish-graph-simulation-container",children:[e.jsx("div",{ref:n,className:"kuramoto-graph-canvas-container-svg",children:e.jsx(A,{FallbackComponent:le,onError:C,children:e.jsx("svg",{width:460,height:400,ref:a})})}),e.jsx("div",{className:"fish-graph-canvas-container",children:e.jsx(A,{FallbackComponent:le,onError:C,children:l})})]})]})})})}function P(t){return e.jsx(ve,{from:[50,92,180],to:[189,56,219],bold:t.bold,italic:t.italic,children:t.children})}function Ft(){return e.jsxs(te,{title:"...to the coordinated swimming of fishes",children:[e.jsxs(z,{title:"Fish schools",children:[e.jsxs(M,{children:["Let me start by telling you that ",e.jsx(P,{children:"fishes"})," and ",e.jsx(I,{children:"fireflies"})," are the... ",e.jsx("strong",{children:"same thing"}),"!"]}),e.jsx(W,{children:"Wait, what? I'm not really sure about that..."}),e.jsxs(M,{children:["Okay, ",e.jsx("i",{children:"not really"}),", I agree. Still, let's look at their ",e.jsx("i",{children:"similarities"}),". In nature, ",e.jsx(P,{bold:!0,children:"fishes"})," in oceans often travel in ",e.jsx("strong",{children:"schools"}),", meaning that they move together in a ",e.jsx(P,{italic:!0,children:"coordinated manner"}),"."]}),e.jsx(oe,{showSliders:!1}),e.jsxs(G,{children:["You guessed it, how to ",e.jsx("i",{children:"modify our previous model"})," to describe this behavior? And how can we characterize the ",e.jsx(P,{italic:!0,children:"schooliness"})," of fishes?"]})]}),e.jsxs(z,{title:"The Vicsek model",children:[e.jsxs(M,{children:["Let's start by recalling what the two previous models were about. Each ",e.jsx(L,{italic:!0,children:"atom's spin"}),"  or ",e.jsx(I,{italic:!0,children:"firefly"})," was an ",e.jsx(d,{type:"electron",bold:!0,children:"arrow"})," that wanted to ",e.jsx(d,{type:"electron",italic:!0,children:"align with its neighbors"}),". It however also had to fight against ",e.jsx(d,{type:"temperature",italic:!0,children:"thermal fluctuations"})," that randomly changed its orientation. Note that in the Kuramoto model, these arrows were also constantly ",e.jsx("i",{children:"rotating"}),"."]}),e.jsxs(M,{children:["Reinterpreting these models, allow us to introduce the ",e.jsx("strong",{children:"Vicsek model"}),":",e.jsxs("ul",{children:[e.jsxs("li",{children:["The ",e.jsx(d,{type:"electron",bold:!0,children:"arrows"})," are no longer ",e.jsx("i",{children:"spins of atoms"})," or ",e.jsx("i",{children:"fireflies"}),", but rather ",e.jsx(P,{bold:!0,italic:!0,children:"fishes"}),", and they ",e.jsx("i",{children:"do no longer rotate"})," anymore over time. The ",e.jsx(d,{type:"magnet-north",italic:!0,children:"head"})," of the arrow is the ",e.jsx(d,{type:"magnet-north",italic:!0,children:"fish head"}),", and the ",e.jsx(d,{type:"magnet-south",italic:!0,children:"tail"})," is... its ",e.jsx(d,{type:"magnet-south",italic:!0,children:"tail"}),"."]}),e.jsxs("li",{children:["The ",e.jsx(P,{children:"fishes"})," can move ",e.jsx("i",{children:"freely in space"}),"."]}),e.jsxs("li",{children:["The ",e.jsx(d,{type:"temperature",children:"noise"})," ",e.jsx(y,{type:"temperature",children:"T"})," is again ",e.jsx("i",{children:"how much the arrows is shaken"})," around. Now, it describes how much the fishes are ",e.jsx(d,{type:"temperature",italic:!0,children:"independent"}),"."]}),e.jsxs("li",{children:["The ",e.jsx(d,{type:"coupling",children:"interaction strength"})," ",e.jsx(y,{type:"coupling",children:"K"})," is now ",e.jsx(d,{type:"coupling",italic:!0,children:"how strongly"})," a given fish wants to ",e.jsx(d,{type:"coupling",italic:!0,children:"align"})," with its neighbors."]})]}),"Finally, the equation that describes how the angle ",e.jsx(y,{children:"\\color{electron}{\\theta}_j"})," of a given fish ",e.jsx(y,{children:"j"})," evolves over time is",e.jsx($,{children:"$$ \\frac{\\mathrm{d}\\color{electron}{\\theta}_j}{\\mathrm{d}t} = \\color{coupling}{K} \\sum_{j' \\mathrm{\\ that\\ are}\\atop \\mathrm{\\ neighbors\\  of\\ } j} \\sin(\\color{electron}{\\theta}_{j'} - \\color{electron}{\\theta}_j) + \\eta(t) \\sqrt{\\color{temperature}{T}}.$$"})]}),e.jsxs(q,{children:["Note how we only changed our view again, and that the ",e.jsx("strong",{children:"equation stayed"})," (",e.jsx("i",{children:"almost"}),") ",e.jsx("strong",{children:"exactly the same"}),"!"]}),e.jsx(J,{title:"Velocity and position update",children:e.jsxs(M,{children:["The way we handle the ",e.jsx(d,{type:"magnet",bold:!0,children:"movement"})," of the fishes is a bit ",e.jsx("i",{children:"more complex"})," than just updating their angle. At each time, we first update each ",e.jsx(y,{children:"\\color{electron}{\\theta}_j"})," of every fish, and then update their ",e.jsx(d,{type:"magnet",italic:!0,children:"position"})," ",e.jsx(y,{children:"\\color{magnet}{\\mathbf{r}}_j"}),", according to the relation",e.jsx($,{children:"$$ \\color{magnet}{\\mathbf{r}}_j(t + \\Delta t) = \\color{magnet}{\\mathbf{r}}_j(t) + v_0 \\Delta t \\left( \\cos \\color{electron}{\\theta}_j(t),\\, \\sin \\color{electron}{\\theta}_j(t) \\right),$$"}),"where we assume that each fish swims at a constant speed ",e.jsx(y,{children:"v_0"}),". Without entering into too many details, this update scheme is ",e.jsx("i",{children:"very typical"})," in simulations. It is called the ",e.jsx("strong",{children:"Euler method"}),", and can be directly derived from ",e.jsx("strong",{children:"Newton's laws of motion"}),"."]})}),e.jsx(oe,{showSliders:!0,title:"Fish schools",description:e.jsx(e.Fragment,{children:e.jsxs(M,{children:["Here is a simulation of the ",e.jsx("strong",{children:"Vicsek model"}),". You can change the ",e.jsx(d,{type:"coupling",children:"interaction strength"})," ",e.jsx(y,{type:"coupling",children:"K"})," and the ",e.jsx(d,{type:"temperature",children:"noise strength"})," ",e.jsx(y,{type:"temperature",children:"T"})," using the sliders. You can also toggle the display of the internal structure of the fishes (",e.jsx("i",{children:"the"})," ",e.jsx(d,{type:"electron",italic:!0,children:"arrows"}),") using the checkbox."]})})}),e.jsxs(G,{children:["That's your last job of the day! Try to change especially the ",e.jsx(d,{type:"coupling",children:"interaction strength"})," ",e.jsx(y,{type:"coupling",children:"K"})," and see how it affects the behavior of the ",e.jsx(P,{italic:!0,children:"fish school"}),".",e.jsx("br",{}),"How could we ",e.jsx("strong",{children:"characterize"})," this effect more precisely?"]})]}),e.jsxs(z,{title:"Characterizing the schooliness of fishes",children:[e.jsxs(M,{children:["As you can see, the fishes start to swim in a ",e.jsx("strong",{children:"coordinated"})," manner when the ",e.jsx(d,{type:"coupling",bold:!0,children:"interaction strength"})," is ",e.jsx(d,{type:"coupling",italic:!0,children:"below a certain threshold"}),". To characterize this ",e.jsx("i",{children:"flocking behavior"}),", we can take a look at the ",e.jsx(d,{type:"electron",bold:!0,italic:!0,children:"average direction"})," of the fishes, the same way as before."]}),e.jsxs(M,{children:["We again define a ",e.jsx(d,{type:"electron",bold:!0,children:"mean arrow"})," following the same procedure that we already did two times! The  ",e.jsx(d,{type:"electron",italic:!0,children:"length of the arrow"})," now tells us how coordinated the fishes are:",e.jsxs("ul",{children:[e.jsxs("li",{children:["If the length is close to ",e.jsx(d,{type:"magnet-north",italic:!0,children:"one"}),", they are all swimming in the ",e.jsx(d,{type:"magnet-north",italic:!0,children:"same direction"}),"."]}),e.jsxs("li",{children:["If the length is close to ",e.jsx(d,{type:"magnet-south",italic:!0,children:"zero"}),", they are swimming ",e.jsx(d,{type:"magnet-south",italic:!0,children:"independently"}),"."]})]}),"Now, ",e.jsx("i",{children:"you know the deal"}),", let's plot how this ",e.jsx(d,{type:"electron",bold:!0,italic:!0,children:"order parameter"})," evolves as a function of the ",e.jsx(d,{type:"coupling",children:"interaction strength"}),"."]}),e.jsxs(q,{children:["We could also plot it as a function of the ",e.jsx(d,{type:"temperature",children:"noise strength"}),": the two values are ",e.jsx("strong",{children:"directly related"}),"!"]}),e.jsx("div",{style:{height:"25px"}}),e.jsx(At,{}),e.jsxs(M,{children:["What we observe is that there is a ",e.jsx("strong",{children:"sudden change"})," in the coordination amount at a certain amount of ",e.jsx(d,{type:"coupling",bold:!0,italic:!0,children:"interaction strength"}),"... again! ",e.jsx(d,{type:"magnet-south",italic:!0,children:"Below"})," this threshold, the fishes swim in a ",e.jsx(d,{type:"magnet-south",italic:!0,children:"coordinated"})," manner, while ",e.jsx(d,{type:"magnet-north",italic:!0,children:"above"})," it, they swim ",e.jsx(d,{type:"magnet-north",italic:!0,children:"independently"}),"... again!"]})]}),e.jsx(U,{}),e.jsxs(z,{children:[e.jsxs(M,{children:["This is a ",e.jsx(P,{bold:!0,italic:!0,children:"phase transition"}),"... again! With just a ",e.jsx(P,{italic:!0,children:"slightly different"})," model, but with ",e.jsx(P,{italic:!0,children:"new physical interpretations"}),", how awesome is that?"]}),e.jsxs(M,{children:["Alright, we could go on with other variations or model applications, but I think you get the point: it's ",e.jsx("strong",{children:"time to wrap up"})," this article."]})]})]})}function $t(t,n,a,o,u,l){var h=o,c=u,i,r,s;t.beginPath(),t.moveTo(n,a),t.lineTo(o,u),t.stroke(),t.beginPath(),i=Math.atan2(u-a,o-n),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.moveTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),t.closePath(),t.fill()}function Re(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function se(t,n){const a=1-Math.random(),o=Math.random();return Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*o)*n+t}function zt(t,n,a){return t.map((o,u)=>o+(n[u]-o)*a)}function _t(t,n,a,o,u){return t.map(l=>(l-n)*(u-o)/(a-n)+o)}function Dt(t,n,a,o,u,l){const i=[...t.posList],r=[...t.velList],s=[...t.thetaList],m=[...t.tickingList];if(l==null){const g=new Array(i.length).fill(0).map(()=>[]);i.forEach((p,w)=>{i.forEach((v,b)=>{if(w!==b){const S=Math.abs(p[0]-v[0]),k=Math.abs(p[1]-v[1]),N=S>.5?1-S:S,T=k>.5?1-k:k;Math.hypot(N,T)<.3&&g[w].push(b)}})}),s.forEach((p,w)=>{const v=g[w],b=t.omegaList[w];if(v.length>0){const N=v.reduce((T,R)=>{const E=s[R];return T+Math.sin(E-p)},0)/v.length;s[w]=p+b*u+a*N+Math.sqrt(n)*.1*se(0,10)*u,o||(s[w]=0)}s[w]=(s[w]+2*Math.PI)%(2*Math.PI);const S=.1,k=3*Math.PI/2;s[w]>k-S&&s[w]<k+S&&(m[w]=1),m[w]>0&&(m[w]-=2*u,m[w]<0&&(m[w]=0))})}else s.forEach((f,g)=>{const p=t.omegaList[g];s[g]=f+p*u,s[g]=(s[g]+2*Math.PI)%(2*Math.PI);const w=.1,v=3*Math.PI/2;s[g]>v-w&&s[g]<v+w&&(m[g]=1),m[g]>0&&(m[g]-=2*u,m[g]<0&&(m[g]=0))});const x=.02;return i.forEach((f,g)=>{const p=t.velList[g];f[0]+=p[0]*u,f[1]+=p[1]*u,f[0]=(f[0]+1)%1,f[1]=(f[1]+1)%1;let w=Math.hypot(p[0],p[1]);p[0]+=x*se(0,3)*u,p[1]+=x*se(0,3)*u,p[0]=p[0]/Math.hypot(p[0],p[1])*w,p[1]=p[1]/Math.hypot(p[0],p[1])*w}),[i,r,s,m]}function qt(t,n,a,o,u,l){if(t.fillStyle="#070124ff",t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height),!u)a.posList.forEach((h,c)=>{const i=Re(h,n),r=a.thetaList[c],s=o[c]>0,m=zt([216,216,216],[255,49,49],o[c]),x=`rgba(${m[0]}, ${m[1]}, ${m[2]}, 1.0)`,f=`rgba(255, 126, 126, ${o[c]*.9})`;t.lineWidth=2,t.strokeStyle=s?x:"rgba(216, 216, 216, 1)",t.fillStyle=s?f:"rgba(255, 255, 255, 0.0)",t.beginPath();const g=15;t.arc(i.x,i.y,g,0,2*Math.PI),t.stroke(),t.fill(),t.lineWidth=1,t.fillStyle=s?x:"white";const p=g*.81;$t(t,i.x,i.y,i.x+p*Math.cos(r),i.y+p*Math.sin(r),3)});else{const h=new Path2D("m 0.39546563,-39.40837 c -9.57057903,0 -14.44356163,12.57643 -14.44356163,17.99942 0,5.42298 2.843754,8.37028 2.843754,13.8467 0,4.63847 -2.013608,6.81601 -2.629813,10.68152 A 44.659756,27.601246 0 0 1 2.9198556,1.10337 44.659756,27.601246 0 0 1 14.398746,2.03097 c -0.77399,-3.22107 -2.40295,-5.41183 -2.40295,-9.59322 0,-5.47642 2.84375,-8.42372 2.84375,-13.8467 0,-5.42299 -4.8735204,-17.99942 -14.44408037,-17.99942 z"),c=new Path2D("m 39.748406,-28.316643 c -11.32277,0.02642 -27.75261,9.453673 -27.75261,20.754393 0,0 38.20213,1.30358 38.20213,-13.491184 0,-5.085698 -4.51856,-7.27705 -10.44952,-7.263209 z M 17.931616,-7.70243 c -3.58518,0.019 -5.93582,0.14018 -5.93582,0.14018 0,17.220131 38.20213,26.967329 38.20213,12.172561 0,-11.096071 -21.51073,-12.369591 -32.26631,-12.312741 z"),i=new Path2D("m -38.956948,-28.31664 c 11.322765,0.02642 27.752606,9.453673 27.752606,20.75439 0,0 -38.202132,1.303581 -38.202132,-13.491181 0,-5.085698 4.518562,-7.27705 10.449526,-7.263209 z m 21.816786,20.61421 c 3.585183,0.01898 5.93582,0.14018 5.93582,0.14018 0,17.220132 -38.202132,26.967329 -38.202132,12.172563 0,-11.096074 21.510737,-12.369586 32.266312,-12.312743 z"),r=new Path2D("m 2.9100356,1.10234 a 44.659756,27.601246 0 0 0 -16.7540096,2.0159 c -0.11137,0.69844 -0.17674,1.4515 -0.17674,2.28462 0,5.443609 1.52538,34.031929 14.40687963,34.772549 C 13.267656,39.434789 14.793036,10.846469 14.793036,5.40286 c 0,-1.28289 -0.15595,-2.37701 -0.39429,-3.37189 A 44.659756,27.601246 0 0 0 2.9100356,1.10234 Z");a.posList.forEach((s,m)=>{const x=_t(s,0,1,-.05,1.05);t.save();const f=Re(x,n),g=a.velList[m],p=Math.atan2(g[1],g[0]),w=o[m]>0,v=`rgba(255, 190, 14, ${o[m]*1})`,b="rgba(10, 10, 10, 1.0)";t.translate(f.x,f.y);const S=l!=null?.2:.3;t.scale(S,S),t.rotate(p+1.5),w&&(t.beginPath(),t.filter="blur(12px)",t.arc(0,0,70,0,2*Math.PI),t.fillStyle=v,t.fill()),t.filter="none",t.fillStyle=b,t.strokeStyle=b,t.stroke(h),t.fill(h),t.lineWidth=2,t.strokeStyle=b,t.fillStyle="#b4b4b425",t.stroke(c),t.stroke(i),t.fill(c),t.fill(i),t.fillStyle=w?v:"rgba(77, 77, 77, 0.2)",t.strokeStyle=b,t.stroke(r),t.fill(r),t.restore()})}}function Bt(t,n,a,o,u,l,h,c,i){const s=c==null?12:10,[m,x]=[s,Math.floor(s/n)];let f=j.useRef(new Array(s).fill(!1).map(()=>[0,0])),g=j.useRef(new Array(s).fill(!1).map(()=>[0,0])),p=j.useRef(new Array(s).fill(!1).map(()=>0)),w=j.useRef(new Array(s).fill(!1).map(()=>0)),v=j.useRef(new Array(s).fill(!1).map(()=>0));j.useMemo(()=>{const b=new Array(m*x).fill(!1).map(()=>[Math.random(),Math.random()]),S=new Array(m*x).fill(!1).map(()=>[.15*Math.random(),.15*Math.random()]);f.current=b,g.current=S},[]),j.useMemo(()=>{const b=new Array(m*x).fill(!1).map(()=>c==null?h?se(3,.2):0:Math.random()<c?4:Math.random()*6),S=new Array(m*x).fill(!1).map(()=>c==null?Math.random()*2*Math.PI:Math.random()<c?.2:Math.random()*2*Math.PI),k=new Array(m*x).fill(0);p.current=b,w.current=S,v.current=k},[c]),j.useEffect(()=>{if(!i)return;const b=t.current;b||C(new Error("Canvas reference is null (Kuramoto simulation)"));const S=b,k=window.devicePixelRatio||1,N=S.getBoundingClientRect(),T=N.width*k,R=N.height*k;S.width=T,S.height=R;const E=S.getContext("2d");E||C(new Error("Canvas context is null (Kuramoto simulation)"));const F=E;let D,V=new Date().getTime();const O=()=>{const X=new Date().getTime(),ne=(X-V)/1e3;V=X,[f.current,g.current,w.current,v.current]=Dt({posList:f.current,thetaList:w.current,velList:g.current,omegaList:p.current,tickingList:v.current},a,o,h,ne,c),qt(F,{width:T,height:R},{posList:f.current,velList:g.current,thetaList:w.current},v.current,l,c),D=window.requestAnimationFrame(O)};return O(),()=>{window.cancelAnimationFrame(D)}},[t,i,c])}function Q(t){const[n,a]=j.useState(!1),[o,u]=j.useState(7),[l,h]=j.useState(!0),[c,i]=j.useState(.3),r=j.createRef(),s=j.useMemo(()=>16/9,[]);j.useMemo(()=>{t.showSliders||(u(7),i(1.5))},[t.showSliders]),Bt(r,s,o,c/50,t.showSliders,l,t.omegaActivated,t.fakeSynchronisation,n);let m=e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"custom-check-g-container",children:e.jsxs("div",{className:"custom-check-container",children:[e.jsx("label",{htmlFor:"show-arrows",children:"Arrows"}),e.jsx("input",{type:"checkbox",checked:!l,onChange:x=>h(!x.target.checked)})]})}),e.jsx(_,{label:"Temperature",value:o,onChange:u,min:0,max:15,step:.01,color:"#6a5ff7",displayValue:!1}),e.jsx(_,{label:e.jsx(e.Fragment,{children:"¬†¬†¬†Interaction"}),value:c,onChange:i,min:0,max:2,step:.001,color:"#12a02a",displayValue:!1})]});return e.jsx(H,{aspectRatio:`${s}`,title:t.title,description:t.description,controls:t.showSliders?m:e.jsx(e.Fragment,{}),canvasRef:r,onChangeVisibleState:a,is2D:!0})}function Ot(t,n,a,o,u,l){var h=o,c=u,i,r,s;t.beginPath(),t.moveTo(n,a),t.lineTo(o,u),t.stroke(),t.beginPath(),i=Math.atan2(u-a,o-n),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.moveTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),t.closePath(),t.fill()}function Ie(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function Wt(t,n){const a=1-Math.random(),o=Math.random();return Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*o)*n+t}function Vt(t,n,a,o){const h=[...t.posList],c=[...t.velList],i=[...t.thetaList],r=[...t.tickingList];return i.forEach((s,m)=>{const x=t.omegaList[m];i[m]=s+x*o+Math.sqrt(n)*.1*Wt(0,12)*o,i[m]=(i[m]+2*Math.PI)%(2*Math.PI);const f=.1,g=3*Math.PI/2;i[m]>g-f&&i[m]<g+f&&(r[m]=1),r[m]>0&&(r[m]-=2*o,r[m]<0&&(r[m]=0))}),[h,c,i,r]}function Ht(t,n,a,o,u){t.fillStyle="#070124ff",t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height);const l=new Path2D("m 0.39546563,-39.40837 c -9.57057903,0 -14.44356163,12.57643 -14.44356163,17.99942 0,5.42298 2.843754,8.37028 2.843754,13.8467 0,4.63847 -2.013608,6.81601 -2.629813,10.68152 A 44.659756,27.601246 0 0 1 2.9198556,1.10337 44.659756,27.601246 0 0 1 14.398746,2.03097 c -0.77399,-3.22107 -2.40295,-5.41183 -2.40295,-9.59322 0,-5.47642 2.84375,-8.42372 2.84375,-13.8467 0,-5.42299 -4.8735204,-17.99942 -14.44408037,-17.99942 z"),h=new Path2D("m 39.748406,-28.316643 c -11.32277,0.02642 -27.75261,9.453673 -27.75261,20.754393 0,0 38.20213,1.30358 38.20213,-13.491184 0,-5.085698 -4.51856,-7.27705 -10.44952,-7.263209 z M 17.931616,-7.70243 c -3.58518,0.019 -5.93582,0.14018 -5.93582,0.14018 0,17.220131 38.20213,26.967329 38.20213,12.172561 0,-11.096071 -21.51073,-12.369591 -32.26631,-12.312741 z"),c=new Path2D("m -38.956948,-28.31664 c 11.322765,0.02642 27.752606,9.453673 27.752606,20.75439 0,0 -38.202132,1.303581 -38.202132,-13.491181 0,-5.085698 4.518562,-7.27705 10.449526,-7.263209 z m 21.816786,20.61421 c 3.585183,0.01898 5.93582,0.14018 5.93582,0.14018 0,17.220132 -38.202132,26.967329 -38.202132,12.172563 0,-11.096074 21.510737,-12.369586 32.266312,-12.312743 z"),i=new Path2D("m 2.9100356,1.10234 a 44.659756,27.601246 0 0 0 -16.7540096,2.0159 c -0.11137,0.69844 -0.17674,1.4515 -0.17674,2.28462 0,5.443609 1.52538,34.031929 14.40687963,34.772549 C 13.267656,39.434789 14.793036,10.846469 14.793036,5.40286 c 0,-1.28289 -0.15595,-2.37701 -0.39429,-3.37189 A 44.659756,27.601246 0 0 0 2.9100356,1.10234 Z");a.posList.forEach((r,s)=>{t.save();const m=Ie(r,n),x=-1.5,f=o[s]>0,g=`rgba(255, 190, 14, ${o[s]*1})`,p="rgba(10, 10, 10, 1.0)";t.translate(m.x,m.y),t.scale(1.2,1.2),t.rotate(x+1.5),f&&(t.beginPath(),t.filter="blur(12px)",t.arc(0,0,70,0,2*Math.PI),t.fillStyle=g,t.fill()),t.filter="none",t.fillStyle=p,t.strokeStyle=p,t.stroke(l),t.fill(l),t.lineWidth=2,t.strokeStyle=p,t.fillStyle="#b4b4b425",t.stroke(h),t.stroke(c),t.fill(h),t.fill(c),t.fillStyle=f?g:"rgba(77, 77, 77, 0.2)",t.strokeStyle=p,t.stroke(i),t.fill(i),t.restore()}),a.posList.forEach((r,s)=>{const m=Ie(r,n),x=a.thetaList[s];t.lineWidth=2,t.strokeStyle="rgba(216, 216, 216, 1)",t.fillStyle="rgba(255, 255, 255, 0.0)",t.beginPath();const f=100;t.arc(m.x,m.y,f,0,2*Math.PI),t.stroke(),t.fill(),t.lineWidth=3,t.fillStyle="white";const g=f*.81;Ot(t,m.x,m.y,m.x+g*Math.cos(x),m.y+g*Math.sin(x),10)})}function Kt(t,n,a,o,u,l){let h=j.useMemo(()=>{const[x,f]=[1,1],g=new Array(x*f).fill(!1).map(()=>[.48,.48]),p=new Array(x*f).fill(!1).map(()=>[0,0]),w=new Array(x*f).fill(!1).map(()=>3),v=new Array(x*f).fill(!1).map(()=>Math.random()*2*Math.PI),b=new Array(x*f).fill(0);return{Nx:x,Ny:f,posList:g,velList:p,omegaList:w,thetaList:v,tickingList:b}},[]),c=j.useRef(h.posList),i=j.useRef(h.velList),r=j.useRef(h.omegaList),s=j.useRef(h.thetaList),m=j.useRef(h.tickingList);j.useEffect(()=>{if(!l)return;const x=t.current;x||C(new Error("Canvas reference is null (Kuramoto simulation)"));const f=x,g=window.devicePixelRatio||1,p=f.getBoundingClientRect(),w=p.width*g,v=p.height*g;f.width=w,f.height=v;const b=f.getContext("2d");b||C(new Error("Canvas context is null (Kuramoto simulation)"));const S=b;let k,N=new Date().getTime();const T=()=>{const R=new Date().getTime(),E=(R-N)/1e3;N=R,[c.current,i.current,s.current,m.current]=Vt({Nx:h.Nx,Ny:h.Ny,posList:c.current,thetaList:s.current,velList:i.current,omegaList:r.current,tickingList:m.current},a,o,E),Ht(S,{width:w,height:v},{Nx:h.Nx,Ny:h.Ny,posList:c.current,velList:i.current,thetaList:s.current},m.current),k=window.requestAnimationFrame(T)};return T(),()=>{window.cancelAnimationFrame(k)}},[t,l])}function Gt(t){const[n,a]=j.useState(!1),[o,u]=j.useState(4),[l,h]=j.useState(!0),c=j.createRef(),i=j.useMemo(()=>16/6,[]);Kt(c,i,o,1,l,n);let r=e.jsx(e.Fragment,{children:e.jsx(_,{label:"Temperature",value:o,onChange:u,min:0,max:40,step:.01,color:"#6a5ff7",displayValue:!1})});return e.jsx(H,{aspectRatio:`${i}`,title:t.title,description:t.description,controls:r,canvasRef:c,onChangeVisibleState:a,is2D:!0})}function Ee(t,n,a,o,u,l){var h=o,c=u,i,r,s;t.beginPath(),t.moveTo(n,a),t.lineTo(o,u),t.stroke(),t.beginPath(),i=Math.atan2(u-a,o-n),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.moveTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),t.closePath(),t.fill()}function Jt(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function We(t,n){const a=1-Math.random(),o=Math.random();return Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*o)*n+t}function Yt(t,n,a,o){const h=t.posList,c=[...t.velList],i=[...t.thetaList],r=[...t.tickingList],s=.3,m=new Array(h.length).fill(0).map(()=>[]);return h.forEach((x,f)=>{h.forEach((g,p)=>{if(f!==p){const w=Math.abs(x[0]-g[0]),v=Math.abs(x[1]-g[1]),b=w>.5?1-w:w,S=v>.5?1-v:v;Math.hypot(b,S)<s&&m[f].push(p)}})}),i.forEach((x,f)=>{const g=m[f],p=t.omegaList[f];if(g.length>0){const b=g.reduce((S,k)=>{const N=i[k];return S+Math.sin(N-x)},0)/g.length;i[f]=x+p*o+a*b+Math.sqrt(n)*.1*We(0,10)*o}i[f]=(i[f]+2*Math.PI)%(2*Math.PI);const w=.1,v=3*Math.PI/2;i[f]>v-w&&i[f]<v+w&&(r[f]=1),r[f]>0&&(r[f]-=2*o,r[f]<0&&(r[f]=0))}),[h,c,i,r]}function Zt(t,n,a,o){t.fillStyle="#070124ff",t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height);const u=150,l=Jt([.5,.5],n);if(a.posList.forEach((i,r)=>{const s=a.thetaList[r];t.lineWidth=8,t.fillStyle="rgba(214, 182, 0, 0.23)",t.strokeStyle=t.fillStyle,Ee(t,l.x,l.y,l.x+u*Math.cos(s),l.y+u*Math.sin(s),15)}),o){const i=a.thetaList.reduce((g,p)=>[g[0]+Math.cos(p),g[1]+Math.sin(p)],[0,0]),r=Math.hypot(i[0],i[1])/a.thetaList.length,s=r*.95,m=Math.atan2(i[1],i[0]);t.lineWidth=(1-r)*3+r*12,t.strokeStyle="rgba(255, 255, 255, 1)",t.fillStyle="rgba(255, 255, 255, 1)";const x=l.x+u*s*Math.cos(m),f=l.y+u*s*Math.sin(m);Ee(t,l.x,l.y,x,f,(1-r)*5+r*21)}const h=u*1.1;t.beginPath(),t.arc(l.x,l.y,h,0,2*Math.PI),t.strokeStyle="rgba(255, 255, 255, 1)",t.lineWidth=4,t.stroke();const c=6;t.beginPath(),t.arc(l.x,l.y,c,0,2*Math.PI),t.fillStyle="rgba(255, 255, 255, 1)",t.fill()}function Ut(t,n,a,o,u,l){let c=j.useMemo(()=>{const[g,p]=[15,Math.floor(15/n)],w=new Array(g*p).fill(!1).map(()=>[Math.random(),Math.random()]),v=new Array(g*p).fill(!1).map(()=>[.15*Math.random(),.15*Math.random()]),b=new Array(g*p).fill(!1).map(()=>We(1,.1)),S=new Array(g*p).fill(!1).map(()=>Math.random()*2*Math.PI),k=new Array(g*p).fill(0);return{Nx:g,Ny:p,posList:w,velList:v,omegaList:b,thetaList:S,tickingList:k}},[]),i=j.useRef(c.posList),r=j.useRef(c.velList),s=j.useRef(c.omegaList),m=j.useRef(c.thetaList),x=j.useRef(c.tickingList);j.useEffect(()=>{if(!l)return;const f=t.current;f||C(new Error("Canvas reference is null (Kuramoto simulation)"));const g=f,p=window.devicePixelRatio||1,w=g.getBoundingClientRect(),v=w.width*p,b=w.height*p;g.width=v,g.height=b;const S=g.getContext("2d");S||C(new Error("Canvas context is null (Kuramoto simulation)"));const k=S;let N,T=new Date().getTime();const R=()=>{const E=new Date().getTime(),F=(E-T)/1e3;T=E,[i.current,r.current,m.current,x.current]=Yt({Nx:c.Nx,Ny:c.Ny,posList:i.current,thetaList:m.current,velList:r.current,omegaList:s.current,tickingList:x.current},a,o,F),Zt(k,{width:v,height:b},{Nx:c.Nx,Ny:c.Ny,posList:i.current,velList:r.current,thetaList:m.current},u),N=window.requestAnimationFrame(R)};return R(),()=>{window.cancelAnimationFrame(N)}},[t,l])}function Pe(t){const[n,a]=j.useState(!1),[o,u]=j.useState(2),[l,h]=j.useState(.1),c=j.createRef(),i=j.useMemo(()=>16/10,[]);Ut(c,i,o,l/50*.9,t.drawOrderParameter,n);let r=e.jsxs(e.Fragment,{children:[e.jsx(_,{label:"Temperature",value:o,onChange:u,min:0,max:6,step:.01,color:"#6a5ff7",displayValue:!1}),e.jsx(_,{label:e.jsx(e.Fragment,{children:"¬†¬†¬†Interaction"}),value:l,onChange:h,min:0,max:1,step:.001,color:"#12a02a",displayValue:!1})]});return e.jsx(H,{aspectRatio:`${i}`,title:t.title,description:t.description,controls:r,canvasRef:c,onChangeVisibleState:a,is2D:!0})}function ce({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function Xt(t,n,a){const o=n.current?.clientWidth||100,l=Math.min(o*.8,380);t.current.setAttribute("width",o.toString()),t.current.setAttribute("height",l.toString());const h={top:20,right:20,bottom:45,left:50},c=o-h.left-h.right,i=l-h.top-h.bottom,r=ge(t.current).append("svg").attr("width",c+h.left+h.right).attr("height",i+h.top+h.bottom).append("g").attr("transform",`translate(${h.left},${h.top})`),s=b=>{if(b>1){const S=(b-1)*.8-1;return Math.sqrt(1-S*S)}return 0},m=Y().domain([0,2]).range([0,c]).nice(),x=Y().domain([-.05,1.05]).range([i,0]).nice();r.append("g").attr("transform",`translate(0, ${i})`).call(xe(m).ticks(c/80).tickSizeOuter(0)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),r.append("g").call(je(x).ticks(i/100).tickSizeOuter(0)),r.append("text").attr("text-anchor","middle").attr("x",c/2).attr("y",i+h.bottom-5).attr("fill","#12a02a").attr("font-size","16px").attr("font-weight","bold").text("Interaction strength"),r.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-i/2).attr("y",-35).attr("fill","#2c2c2cff").attr("font-weight","bold").attr("font-size","16px").text("Synchronisation amount");const f=pe().x(b=>m(b.x)).y(b=>x(b.y));r.append("path").attr("fill","none").attr("stroke","#2c2c2cff").attr("stroke-width",4.5).attr("d",f(ae(0,2,.001).map(b=>({x:b,y:s(b)}))));const g=200,p=m.invert(g),w=r.append("circle").attr("class","hover-point").attr("display","none").attr("r",8).attr("fill","#12a02a").attr("display","unset").attr("cx",g).attr("cy",x(s(p)));a(s(p));const v=r.append("line").attr("class","hover-line").attr("stroke","#12a02a").attr("stroke-width",3).attr("stroke-dasharray","5,5").attr("x1",g).attr("y1",0).attr("x2",g).attr("y2",i);r.append("rect").attr("x",0).attr("y",0).attr("width",c).attr("height",i).attr("fill","transparent").on("mousemove",function(b){const[S,k]=fe(b),N=x.invert(k);if(N>=-1&&N<=1){const T=m.invert(S);v.attr("x1",S).attr("y1",0).attr("x2",S).attr("y2",i);const R=s(T);w.attr("display","unset").attr("cx",S).attr("cy",x(R)),a(R<.001?Math.random()*1e-5:R)}})}function Qt(t){const n=j.useRef(null),a=j.useRef(null),[o,u]=j.useState(0),l=j.useMemo(()=>e.jsx(Q,{showSliders:!1,omegaActivated:!0,fakeSynchronisation:o}),[o]);return j.useEffect(()=>{Xt(a,n,u)},[a]),e.jsx(e.Fragment,{children:e.jsx(A,{FallbackComponent:ce,onError:C,children:e.jsxs("div",{className:"kuramoto-simulation-container",children:[t.title&&t.description&&e.jsxs("div",{className:"simulation-description",children:[e.jsx("div",{className:"simulation-description-title",children:t.title}),e.jsx("div",{className:"simulation-description-content",children:t.description})]}),e.jsxs("div",{className:"kuramoto-graph-simulation-container",children:[e.jsx("div",{ref:n,className:"kuramoto-graph-canvas-container-svg",children:e.jsx(A,{FallbackComponent:ce,onError:C,children:e.jsx("svg",{width:460,height:400,ref:a})})}),e.jsx("div",{className:"kuramoto-graph-canvas-container",children:e.jsx(A,{FallbackComponent:ce,onError:C,children:l})})]})]})})})}function en(t,n,a,o,u,l){var h=o,c=u,i,r,s;t.beginPath(),t.moveTo(n,a),t.lineTo(o,u),t.stroke(),t.beginPath(),i=Math.atan2(u-a,o-n),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.moveTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),i+=1/3*(2*Math.PI),r=l*Math.cos(i)+h,s=l*Math.sin(i)+c,t.lineTo(r,s),t.closePath(),t.fill()}function tn(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function nn(t,n){const a=1-Math.random(),o=Math.random();return Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*o)*n+t}function rn(t,n,a,o,u){const h=[...t.posList],c=[...t.thetaList],i=.3,r=new Array(h.length).fill(0).map(()=>[]);return h.forEach((s,m)=>{h.forEach((x,f)=>{if(m!==f){const g=Math.abs(s[0]-x[0]),p=Math.abs(s[1]-x[1]),w=g>.5?1-g:g,v=p>.5?1-p:p;Math.hypot(w,v)<i&&r[m].push(f)}})}),c.forEach((s,m)=>{const x=r[m];if(x.length>0){const f=x.reduce((g,p)=>{const w=c[p];return g+Math.sin(w-s)},0)/x.length;c[m]=s+(u?a*f+Math.sqrt(n)*.1*nn(0,10)*o:0)}c[m]=(c[m]+2*Math.PI)%(2*Math.PI)}),c}function sn(t,n,a){t.fillStyle="#070124ff",t.clearRect(0,0,n.width,n.height),t.fillRect(0,0,n.width,n.height),a.posList.forEach((o,u)=>{const l=tn(o,n),h=a.thetaList[u],c=30;t.lineWidth=2,t.strokeStyle="white",t.fillStyle="white";const i=c*.81,r=i*Math.cos(h),s=i*Math.sin(h);en(t,l.x-r/2,l.y-s/2,l.x+r/2,l.y+s/2,5)})}function an(t,n,a,o,u,l){const[c,i]=[16,Math.floor(16/n)];let r=j.useRef(new Array(16).fill(!1).map(()=>[0,0])),s=j.useRef(new Array(16).fill(!1).map(()=>0));j.useMemo(()=>{const m=new Array(c*i).fill(!1).map((f,g)=>[(g%c+.5)/c,(Math.floor(g/c)+.5)/i]),x=new Array(c*i).fill(!1).map(()=>Math.random()*2*Math.PI);r.current=m,s.current=x},[]),j.useEffect(()=>{if(!l)return;const m=t.current;m||C(new Error("Canvas reference is null (Kuramoto simulation)"));const x=m,f=window.devicePixelRatio||1,g=x.getBoundingClientRect(),p=g.width*f,w=g.height*f;x.width=p,x.height=w;const v=x.getContext("2d");v||C(new Error("Canvas context is null (Kuramoto simulation)"));const b=v;let S,k=new Date().getTime();const N=()=>{const T=new Date().getTime(),R=(T-k)/1e3;k=T,s.current=rn({posList:r.current,thetaList:s.current},a,o,R,u),sn(b,{width:p,height:w},{posList:r.current,thetaList:s.current}),S=window.requestAnimationFrame(N)};return N(),()=>{window.cancelAnimationFrame(S)}},[t,l])}function Ae(t){const[n,a]=j.useState(!1),[o,u]=j.useState(7),[l,h]=j.useState(.3),c=j.createRef(),i=j.useMemo(()=>16/9,[]);an(c,i,o,l/50,t.showTSlider,n);let r=e.jsxs(e.Fragment,{children:[t.showTSlider&&e.jsx(_,{label:"Temperature",value:o,onChange:u,min:0,max:15,step:.01,color:"#6a5ff7",displayValue:!1}),e.jsx(_,{label:e.jsx(e.Fragment,{children:"¬†¬†¬†Interaction"}),value:l,onChange:h,min:0,max:2,step:.001,color:"#12a02a",displayValue:!1})]});return e.jsx(H,{aspectRatio:`${i}`,title:t.title,description:t.description,controls:r,canvasRef:c,onChangeVisibleState:a,is2D:!0})}function I(t){return e.jsx(ve,{from:[29,157,242],to:[224,2,161],bold:t.bold,italic:t.italic,children:t.children})}function on(){return e.jsxs(te,{title:"...through the synchronized flashing of fireflies...",children:[e.jsxs(z,{title:"Fireflies?",children:[e.jsxs(W,{children:["Did you ever saw ",e.jsx(I,{bold:!0,children:"fireflies"})," ",e.jsx("i",{children:"flashing in the night"}),"? If so, did you notice anything special about them?"]}),e.jsxs(M,{children:["If you did, you might have noticed that their ",e.jsx(d,{type:"electron",bold:!0,children:"light"})," seems to ",e.jsx(d,{type:"electron",italic:!0,children:"blink"})," in a ",e.jsx("strong",{children:"synchronized"})," manner, almost like a ",e.jsx("i",{children:"dance"}),"."]}),e.jsx(Q,{showSliders:!1,omegaActivated:!0}),e.jsxs(M,{children:["What if I told you that, using just a ",e.jsx("strong",{children:"very lightly modified version"})," of what we just saw, we can explain this ",e.jsx(I,{bold:!0,children:"synchronized flashing of fireflies"}),"?"]})]}),e.jsxs(z,{title:"Extending the Ising model",children:[e.jsxs(G,{children:["Ok, so far we saw how to describe ",e.jsx(L,{italic:!0,children:"magnets"})," using the ",e.jsx("strong",{children:"Ising model"}),". But I just told you that using a ",e.jsx("strong",{children:"generalization"})," of this model, we could also describe ",e.jsx(I,{italic:!0,children:"fireflies"}),". Try to think about how we could do this."]}),e.jsxs(M,{children:["Let's first talk about the Ising model, ",e.jsx("i",{children:"again"}),". Trust me on this. A core approximation that we did was to consider the ",e.jsx(d,{type:"electron",bold:!0,italic:!0,children:"spins"})," of every atoms (their ",e.jsx(d,{type:"electron",italic:!0,children:"tiny arrows"}),") only either pointing ",e.jsx(d,{type:"magnet-north",children:"up"})," or ",e.jsx(d,{type:"magnet-south",children:"down"}),", that is ",e.jsx(y,{children:"S_j = \\pm 1"}),". However, in real life, spins are not limited to just ",e.jsx("i",{children:"two values"}),": they can point in ",e.jsx("strong",{children:"any direction"}),"."]}),e.jsxs(q,{children:["Here, we consider ",e.jsx("strong",{children:"2D spins"})," to simplify the simulations and equations, but the model can be extended to ",e.jsx("strong",{children:"3D spins"}),"."]}),e.jsxs(M,{children:["To simplify a bit, ",e.jsx("i",{children:"instead of talking about vectors"}),", we describe each atom by an ",e.jsx(d,{type:"electron",bold:!0,children:"angle"})," to, let's say, the ",e.jsx("i",{children:"horizontal axis"}),". Therefore, instead of using ",e.jsx(y,{type:"electron",children:"S_j"})," to describe the atom ",e.jsx(y,{children:"j"}),", we use the angle ",e.jsx(y,{children:"\\color{electron}{\\theta}_j"}),". What is nice about this, is that now this angle is no longer just ",e.jsx(y,{type:"magnet-north",children:"\\pi/2"})," (",e.jsx(d,{type:"magnet-north",italic:!0,children:"up"})," where ",e.jsx(y,{children:"S_j =\\,"}),e.jsx(y,{type:"magnet-north",children:"+1"}),") or ",e.jsx(y,{type:"magnet-south",children:"-\\pi/2"})," (",e.jsx(d,{type:"magnet-south",italic:!0,children:"down"})," where ",e.jsx(y,{children:"S_j =\\,"}),e.jsx(y,{type:"magnet-south",children:"-1"}),"), but can take ",e.jsx("i",{children:"any value in between"}),", making it ",e.jsx("strong",{children:"continuous"}),"."]}),e.jsxs(M,{children:["We can now rewrite our earlier algorithm as the equation",e.jsx($,{children:"$$ \\frac{\\mathrm{d}\\color{electron}{\\theta}_j}{\\mathrm{d}t} = \\color{coupling}{K} \\sum_{j' \\mathrm{\\ that\\ are}\\atop \\mathrm{\\ neighbors\\  of\\ } j} \\sin(\\color{electron}{\\theta}_{j'} - \\color{electron}{\\theta}_j). $$"}),"Let's break this down:",e.jsxs("ul",{children:[e.jsxs("li",{children:["The notation ",e.jsx(y,{children:"\\mathrm{d}\\color{electron}{\\theta}_j/\\mathrm{d}t"})," means that we are looking at ",e.jsxs("strong",{children:["how the ",e.jsx(d,{type:"electron",children:"angle"})," of ",e.jsx(y,{children:"j"})," changes"]})," over ",e.jsx("strong",{children:"time"}),"."]}),e.jsxs("li",{children:["The term ",e.jsx(y,{children:"\\sin(\\color{electron}{\\theta}_{j'} - \\color{electron}{\\theta}_j)"})," tells us about the ",e.jsx("strong",{children:"interactions"}),":",e.jsxs("ul",{children:[e.jsxs("li",{children:["If ",e.jsx(y,{children:"j"})," is in ",e.jsx(d,{type:"magnet-north",italic:!0,bold:!0,children:"advance"})," compared to ",e.jsx(y,{children:"j'"}),", the sinus is ",e.jsx("i",{children:"negative"}),", so ",e.jsx(y,{children:"\\color{electron}{\\theta}_j"})," will tend to ",e.jsx(d,{type:"magnet-north",italic:!0,children:"decrease"}),": ",e.jsx(y,{children:"j"})," will try to ",e.jsx(d,{type:"magnet-north",italic:!0,bold:!0,children:"catch up"})," with ",e.jsx(y,{children:"j'"}),"."]}),e.jsxs("li",{children:["Conversely, if ",e.jsx(y,{children:"j"})," is ",e.jsx(d,{type:"magnet-south",italic:!0,bold:!0,children:"behind"})," ",e.jsx(y,{children:"j'"}),", the sinus is ",e.jsx("i",{children:"positive"}),", so ",e.jsx(y,{children:"\\color{electron}{\\theta}_j"})," will tend to ",e.jsx(d,{type:"magnet-south",italic:!0,children:"increase"}),": ",e.jsx(y,{children:"j"})," will try to ",e.jsx(d,{type:"magnet-south",italic:!0,bold:!0,children:"slow down"})," for ",e.jsx(y,{children:"j'"}),"."]})]})]}),e.jsxs("li",{children:["The constant ",e.jsx(y,{type:"coupling",children:"K > 0"})," measures how ",e.jsx(d,{type:"coupling",italic:!0,children:"strongly the neighbors influence each other"}),". If ",e.jsx(y,{type:"coupling",children:"K"})," is ",e.jsx("i",{children:"large"}),", the arrows will tend to align ",e.jsx("i",{children:"more quickly"})," than if ",e.jsx(y,{type:"coupling",children:"K"})," is ",e.jsx("i",{children:"small"}),"."]})]})]}),e.jsx(Ae,{showTSlider:!1,title:"2D Ising Model",description:e.jsx(e.Fragment,{children:e.jsxs(M,{children:["Here below is the simulation of this ",e.jsx("strong",{children:"2D Ising model"}),", where each atom is represented by an ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"arrow"}),". You can change the ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"})," ",e.jsx(y,{type:"coupling",children:"K"})," using the slider."]})})}),e.jsxs(M,{children:["And... I think that we forgot about our last, ",e.jsx("i",{children:"and most important"}),", ingredient!"]}),e.jsxs(W,{children:["Where is the ",e.jsx(d,{type:"temperature",children:"temperature"}),"?"]}),e.jsxs(M,{children:["To add it, we can simply add a term in ",e.jsx(y,{children:"\\sqrt{\\color{temperature}{T}}"})," times a factor ",e.jsx(y,{children:"\\eta(t)"})," that represents the ",e.jsx("strong",{children:"strength"})," of these ",e.jsx(d,{type:"temperature",italic:!0,bold:!0,children:"thermal fluctuations"}),". The ",e.jsx(y,{children:"\\eta(t)"})," term will ",e.jsx(d,{type:"electron",italic:!0,children:"randomly change the angle"})," of each atom at each time ",e.jsx(y,{children:"t"}),", simulating the effect of ",e.jsx(d,{type:"temperature",italic:!0,children:"temperature"}),"."]}),e.jsx(J,{title:"Temperature dependence",children:e.jsxs(M,{children:["The fact that we took the ",e.jsx("i",{children:"square root"})," of the ",e.jsx(d,{type:"temperature",italic:!0,children:"temperature"})," is a bit technical, but it is a common way to ",e.jsx("i",{children:"model thermal fluctuations"})," in physics. These types of equations are called ",e.jsx("strong",{children:"stochastic spin dynamics"}),", and here more particularly, the ",e.jsx("strong",{children:"Langevin-Landau-Gilbert"})," equation."]})}),e.jsxs(M,{children:["So our final equation becomes the so-called ",e.jsx("strong",{children:"XY model"}),e.jsx($,{children:"$$ \\frac{\\mathrm{d}\\color{electron}{\\theta}_j}{\\mathrm{d}t} = \\color{coupling}{K} \\sum_{j' \\mathrm{\\ that\\ are}\\atop \\mathrm{\\ neighbors\\  of\\ } j} \\sin(\\color{electron}{\\theta}_{j'} - \\color{electron}{\\theta}_j) + \\eta(t) \\sqrt{\\color{temperature}{T}}. $$"})]}),e.jsx(Ae,{showTSlider:!0,title:"XY Model",description:e.jsx(e.Fragment,{children:e.jsxs(M,{children:["The same model as before, but now with the ",e.jsx(d,{type:"temperature",italic:!0,children:"temperature"})," ",e.jsx(y,{type:"temperature",children:"T"}),". Try to play with these ",e.jsx("i",{children:"two sliders"}),"."]})})}),e.jsxs(M,{children:["I don't want to go into ",e.jsx("i",{children:"too much detail"})," about this model, so lets continue by ",e.jsx("i",{children:"finally"})," talking about... ",e.jsx(I,{italic:!0,bold:!0,children:"fireflies"}),"!"]}),e.jsxs(J,{title:"BKT transition",children:[e.jsxs(M,{children:["The main difference with the previous ",e.jsx("strong",{children:"Ising model"})," (",e.jsx("i",{children:"a 1D model"}),") is that the ",e.jsx("strong",{children:"XY model"})," has a ",e.jsx(d,{type:"magnet",italic:!0,bold:!0,children:"continuous symmetry"}),", meaning that the arrows can point in any direction, not just up or down."]}),e.jsxs(M,{children:["A ",e.jsx("i",{children:"mathematical theorem"}),", called the ",e.jsx("strong",{children:"Mermin-Wagner theorem"}),", explains why this ",e.jsx(d,{type:"magnet",italic:!0,bold:!0,children:"continuous symmetry"})," is important.",e.jsxs("ul",{children:[e.jsxs("li",{children:["For ",e.jsx(d,{type:"electron",bold:!0,children:"3D spins"}),", we recover a phase transition ",e.jsx("strong",{children:"pretty similar"})," to the Ising one."]}),e.jsxs("li",{children:["For ",e.jsx(d,{type:"electron",bold:!0,children:"2D spins"}),", however, a new phase transition appears, called the ",e.jsx("strong",{children:"Berezinski-Kosterlitz-Thouless"})," (",e.jsx("i",{children:"BKT"}),") transition, which is a ",e.jsx("i",{children:"bit more subtle"})," than the one we saw in the Ising model. It is no longer a simple change from ",e.jsx(d,{type:"coupling",italic:!0,children:"ordered"})," to ",e.jsx(d,{type:"coupling",italic:!0,children:"disordered"}),", but rather a ",e.jsx("strong",{children:"change in the nature of the order itself"}),"."]})]})]})]})]}),e.jsxs(z,{title:"The synchronisation of fireflies",children:[e.jsxs(G,{children:["That's very nice, but ",e.jsxs("i",{children:["what does it have to do with ",e.jsx(I,{children:"fireflies"}),"?"]})," Let's start by thinking about it for a bit."]}),e.jsxs(M,{children:["Well, let's change our perspective a little. Instead of thinking of a ",e.jsx(I,{italic:!0,children:"firefly"})," as a ",e.jsx("i",{children:"complex organism"}),", we can think of it as a little ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"arrow"})," that ",e.jsx("i",{children:"constantly rotates"}),". When it is, let's say, pointing ",e.jsx("strong",{children:"up"}),", the firefly ",e.jsx("strong",{children:"flashes"}),"."]}),e.jsxs(M,{children:["So now, ",e.jsx(I,{italic:!0,children:"synchronisation"})," of flashes of fireflies can be seen as if the ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"little arrows"})," of the fireflies are ",e.jsx(I,{italic:!0,children:"trying to align"})," with each other... And ",e.jsx("i",{children:"this is exactly what the XY model describes!"})]}),e.jsx(Gt,{title:"One Firefly",description:e.jsx(e.Fragment,{children:e.jsxs(M,{children:["The simulation of ",e.jsx(I,{bold:!0,italic:!0,children:"one firefly"}),", represented by a ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"rotating arrow"}),". When the arrow points ",e.jsx("i",{children:"up"}),", the firefly ",e.jsx("i",{children:"flashes"}),". Try to change the ",e.jsx(d,{type:"temperature",italic:!0,children:"noise"})," ",e.jsx(y,{type:"temperature",children:"T"})," using the slider to see how much the arrow is ",e.jsx(d,{type:"temperature",italic:!0,children:"shaken around"}),"."]})})}),e.jsxs(M,{children:["We can then use the ",e.jsx("strong",{children:"same model"})," than for ",e.jsx(L,{children:"magnetism"}),", with a ",e.jsx("i",{children:"slight change of perspective"}),":",e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx(I,{bold:!0,children:"Fireflies"})," are ",e.jsx("i",{children:"not"})," atoms arranged in a ",e.jsx("i",{children:"regular grid"}),". They can ",e.jsx("strong",{children:"freely move"})," in all directions. Moreover, a ",e.jsx("i",{children:"neighbor"})," of a firefly is now described as any other firefly that is ",e.jsx("strong",{children:"close enough"})," to it."]}),e.jsxs("li",{children:["The ",e.jsx(d,{type:"temperature",italic:!0,bold:!0,children:"noise"})," ",e.jsx(y,{type:"temperature",children:"T"}),", previously represented ",e.jsx("i",{children:"how much the arrows were shaken"})," around due to ",e.jsx(d,{type:"temperature",italic:!0,children:"temperature"})," fluctuations. Now, ",e.jsx(y,{type:"temperature",children:"T"})," describes how much the fireflies are ",e.jsx(d,{type:"temperature",bold:!0,children:"independent"}),"."]}),e.jsxs("li",{children:["The ",e.jsx(d,{type:"coupling",bold:!0,children:"interaction"})," constant ",e.jsx(y,{type:"coupling",children:"K"})," now describes ",e.jsxs("i",{children:["how ",e.jsx(d,{type:"coupling",bold:!0,italic:!0,children:"strongly"})," a given firefly ",e.jsx(d,{type:"coupling",bold:!0,italic:!0,children:"wants to align"})," with its neighbors"]}),"."]})]}),"And... that's it! Just a ",e.jsx("i",{children:"change of interpretation"}),", nothing more."]}),e.jsx(Q,{showSliders:!0,omegaActivated:!1,title:"Fireflies Synchronisation",description:e.jsx(e.Fragment,{children:e.jsxs(M,{children:["The simulation of the ",e.jsx(I,{italic:!0,children:"fireflies"})," described by our model. You can change the ",e.jsx(d,{type:"temperature",italic:!0,children:"noise"})," ",e.jsx(y,{type:"temperature",children:"T"})," and the ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"})," ",e.jsx(y,{type:"coupling",children:"K"})," using the sliders, and ",e.jsx(d,{type:"electron",italic:!0,children:"tick the box"})," to show the ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"arrows"})," of each firefly."]})})}),e.jsx(W,{children:"Hum... why are they never flashing?"}),e.jsxs(M,{children:["Oops! We forgot to add in our equation that each little ",e.jsx(d,{type:"electron",bold:!0,children:"arrow"})," now ",e.jsx("strong",{children:"rotates continuously"})," over time. We write the  ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"speed"})," of the rotation of each firefly as ",e.jsx(y,{type:"electron",children:"\\omega_j"}),". So let's add this to our model that becomes",e.jsx($,{children:"$$ \\frac{\\mathrm{d}\\color{electron}{\\theta}_j}{\\mathrm{d}t} = \\color{electron}{\\omega}_j + \\color{coupling}{K} \\sum_{j' \\mathrm{\\ that\\ are}\\atop \\mathrm{\\ neighbors\\  of\\ } j} \\sin(\\color{electron}{\\theta}_{j'} - \\color{electron}{\\theta}_j) + \\eta(t) \\sqrt{\\color{temperature}{T}}.$$"})]}),e.jsxs(q,{children:["Here, we took the frequency ",e.jsx(y,{children:"\\omega_j"})," of each firefly from a ",e.jsx("i",{children:"Gaussian distribution"}),"."]}),e.jsx(Q,{showSliders:!0,omegaActivated:!0,title:"Fireflies Synchronisation",description:e.jsx(e.Fragment,{children:e.jsxs(M,{children:["The same as before, but now with the ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"intrinsic rotation"})," of each firefly activated. Try to play with the ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"})," ",e.jsx(y,{type:"coupling",children:"K"})," and see what happens!"]})})}),e.jsxs(q,{children:["In this simulation, the ",e.jsx("i",{children:"constant displacement"})," of each firefly isn't relevant. I just added it to make the simulation more visually appealing."]}),e.jsxs(M,{children:["If you paid attention, you just saw that the fireflies start to ",e.jsx(d,{type:"magnet-north",italic:!0,children:"flash in unison"})," when the ",e.jsx(d,{type:"coupling",bold:!0,children:"interaction strength"})," ",e.jsx(y,{type:"coupling",children:"K"})," is ",e.jsx(d,{type:"magnet-north",italic:!0,children:"large enough"}),". However, ",e.jsx(d,{type:"magnet-south",italic:!0,children:"below a certain threshold"}),", they stop synchronizing and flash ",e.jsx(d,{type:"magnet-south",italic:!0,children:"independently"}),". Does this remind you of something? Again, a ",e.jsx("strong",{children:"phase transition"}),"!"]}),e.jsxs(G,{children:["So now, how do we ",e.jsx("i",{children:"characterize"})," this?",e.jsx("br",{}),"How do we know when the fireflies are ",e.jsx("i",{children:"synchronized"})," or ",e.jsx("i",{children:"not"}),"?"]}),e.jsxs(M,{children:["The first thing that we can do is put ",e.jsx(d,{type:"electron",children:"each arrow"})," on ",e.jsx("strong",{children:"one big circle"}),", to see how they are distributed."]}),e.jsx(Pe,{drawOrderParameter:!1,title:"Order parameter",description:e.jsx(e.Fragment,{children:e.jsxs(M,{children:["The same simulation as before, but we now only draw the ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"arrows"})," of each firefly on a ",e.jsx("strong",{children:"big circle"}),". This allows us to see how the arrows are distributed. Try to change the ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"})," ",e.jsx(y,{type:"coupling",children:"K"})," using the slider."]})})}),e.jsxs(M,{children:["To measure the ",e.jsx("strong",{children:"amount of synchronisation"}),", we can use the same idea as before and define a sort of ",e.jsx(d,{type:"electron",italic:!0,children:"mean arrow"}),". The length of the arrow now tells us ",e.jsx("strong",{children:"how synchronized the fireflies"})," are: if it is close to ",e.jsx(y,{type:"magnet-north",children:"1"}),", they are all flashing in ",e.jsx(d,{type:"magnet-north",bold:!0,italic:!0,children:"unison"}),". However, if it is closer to ",e.jsx(y,{type:"magnet-south",children:"0"}),", they are flashing ",e.jsx(d,{type:"magnet-south",bold:!0,italic:!0,children:"independently"}),"."]}),e.jsxs(J,{title:"Mathematical definition",children:[e.jsxs(M,{children:["Mathematically, we can define this ",e.jsx(d,{type:"electron",italic:!0,children:"mean arrow"})," as a ",e.jsx("strong",{children:"complex number"})," ",e.jsx($,{inline:!0,children:"$\\color{electron}{R} \\mathrm{e}^{\\mathrm{i}\\Phi}$"}),", where ",e.jsx(y,{type:"electron",children:"R"})," is the ",e.jsx(d,{type:"electron",italic:!0,children:"length of the arrow"})," and ",e.jsx(y,{children:"\\Phi"})," is its angle. We have",e.jsx($,{children:"$$\\color{electron}{R} \\mathrm{e}^{\\mathrm{i}\\Phi} = \\frac{1}{N} \\sum_{j=1}^N e^{\\mathrm{i} \\color{electron}{\\theta}_j}.$$"})]}),e.jsxs(M,{children:["So why not simply ",e.jsxs("i",{children:["take the average of the ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"angles"})]}),"? Because angles are ",e.jsx(d,{type:"electron",italic:!0,children:"periodic"}),", meaning that if we take the ",e.jsx("i",{children:"average"})," of two angles that are close to ",e.jsx(y,{children:"0"})," and ",e.jsx(y,{children:"2\\pi"}),", we would get something close to ",e.jsx(y,{children:"\\pi"}),", which is ",e.jsx("i",{children:"not what we want"}),". Instead, we use ",e.jsx("strong",{children:"complex numbers"})," to represent the angles, which allows us to take into account their ",e.jsx(d,{type:"electron",italic:!0,bold:!0,children:"periodic nature"}),"."]})]}),e.jsx(K,{}),e.jsx(Pe,{drawOrderParameter:!0,title:"Order parameter",description:e.jsx(e.Fragment,{children:e.jsxs(M,{children:["Same as before, but now we also draw the ",e.jsx("strong",{children:"mean arrow"})," in white that represents the ",e.jsx("i",{children:"amount of synchronisation"}),"."]})})}),e.jsxs(M,{children:["Then, ",e.jsx("i",{children:"you guessed it"}),", let's measure this ",e.jsx("strong",{children:"synchronisation amount"})," (",e.jsx("i",{children:"the length of the mean arrow"}),") for different values of the ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"}),"."]}),e.jsxs(q,{children:["You can also do this for the ",e.jsx(d,{type:"temperature",italic:!0,children:"noise"})," ",e.jsx(y,{type:"temperature",children:"T"}),", but will see that it is not as interesting. The main parameter that drives the phase transition, that we call the ",e.jsx("strong",{children:"order parameter"}),", is this ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"}),"."]}),e.jsx("div",{style:{height:"35px"}}),e.jsx(Qt,{title:"Synchronisation measurement",description:e.jsxs(M,{children:["Try ",e.jsx("i",{children:"moving your cursor"})," along the ",e.jsx(d,{type:"coupling",italic:!0,bold:!0,children:"interaction strength"})," axis to see how the ",e.jsx(I,{italic:!0,bold:!0,children:"fireflies"})," synchronisation amount changes."]})}),e.jsxs(M,{children:["Again, what you see is what we observed earlier. There is a ",e.jsx("strong",{children:"sudden change"})," in the synchronisation amount at a certain ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"}),". ",e.jsx(d,{type:"magnet-south",italic:!0,children:"Below"})," this value, the fireflies are ",e.jsx(d,{type:"magnet-south",italic:!0,children:"not synchronized"}),", while ",e.jsx(d,{type:"magnet-north",italic:!0,children:"above"})," it, they ",e.jsx(d,{type:"magnet-north",italic:!0,children:"flash in unison"}),"."]}),e.jsxs(M,{children:["What we observe is then another... ",e.jsx("strong",{children:"phase transition"}),"! You guessed it."]}),e.jsxs(q,{children:["This model, called the ",e.jsx("i",{children:"Kuramoto model"}),", can also be used to describe ",e.jsx("i",{children:"many other systems"}),", such as ",e.jsx("strong",{children:"neurons"})," firing in the brain, or even the synchronisation of ",e.jsx("strong",{children:"power grids"}),"."]})]}),e.jsx(U,{}),e.jsxs(z,{children:[e.jsxs(M,{children:["Let's recap what we have learned so far. ",e.jsx(L,{children:"Magnets"}),", ",e.jsx(I,{children:"fireflies"}),", neurons, power grids... all these systems can be described by a ",e.jsx("i",{children:"very similar model"}),". And they all exhibit something called a ",e.jsx("strong",{children:"phase transition"})," for a certain parameter (",e.jsxs("i",{children:[e.jsx(d,{type:"temperature",children:"temperature"}),", ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"}),", etc."]}),") which consist of a ",e.jsx("i",{children:"sudden change"})," in their behavior."]}),e.jsxs(M,{children:["To finish with this article, let's take a look at ",e.jsx("i",{children:"one last example"}),", which is ",e.jsx("i",{children:"for me"})," the most visually striking one: ",e.jsx(P,{children:"fishes"}),"."]})]})]})}const ln=""+new URL("author-DU6Q4enZ.png",import.meta.url).href;function cn(){function t(){navigator.clipboard.writeText(window.location.href)}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"header-widgets",children:e.jsxs("div",{className:"header-widgets-left",children:[e.jsx("div",{className:"hwl-photo",children:e.jsx("img",{src:ln,alt:"Author"})}),e.jsxs("div",{className:"hwl-info",children:[e.jsx("div",{className:"hwl-info-name",children:"Maxime Dherb√©court"}),e.jsxs("div",{className:"hwl-info-desc",children:[e.jsxs("div",{className:"hwl-info-desc-up",children:[e.jsx("div",{className:"hwl-info-text",children:"26 August 2025"}),e.jsx("a",{className:"hwr-link-up",onClick:()=>t(),children:e.jsxs("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),e.jsx("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsxs("g",{id:"SVGRepo_iconCarrier",children:[e.jsx("path",{d:"M7.05025 1.53553C8.03344 0.552348 9.36692 0 10.7574 0C13.6528 0 16 2.34721 16 5.24264C16 6.63308 15.4477 7.96656 14.4645 8.94975L12.4142 11L11 9.58579L13.0503 7.53553C13.6584 6.92742 14 6.10264 14 5.24264C14 3.45178 12.5482 2 10.7574 2C9.89736 2 9.07258 2.34163 8.46447 2.94975L6.41421 5L5 3.58579L7.05025 1.53553Z",fill:"#000000"}),e.jsx("path",{d:"M7.53553 13.0503L9.58579 11L11 12.4142L8.94975 14.4645C7.96656 15.4477 6.63308 16 5.24264 16C2.34721 16 0 13.6528 0 10.7574C0 9.36693 0.552347 8.03344 1.53553 7.05025L3.58579 5L5 6.41421L2.94975 8.46447C2.34163 9.07258 2 9.89736 2 10.7574C2 12.5482 3.45178 14 5.24264 14C6.10264 14 6.92742 13.6584 7.53553 13.0503Z",fill:"#000000"}),e.jsx("path",{d:"M5.70711 11.7071L11.7071 5.70711L10.2929 4.29289L4.29289 10.2929L5.70711 11.7071Z",fill:"#000000"})]})]})})]}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("div",{className:"hwl-info-text",children:"20 minutes read"}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("div",{className:"header-widgets-right",children:e.jsx("a",{className:"hwr-link",onClick:()=>t(),children:e.jsxs("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),e.jsx("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsxs("g",{id:"SVGRepo_iconCarrier",children:[e.jsx("path",{d:"M7.05025 1.53553C8.03344 0.552348 9.36692 0 10.7574 0C13.6528 0 16 2.34721 16 5.24264C16 6.63308 15.4477 7.96656 14.4645 8.94975L12.4142 11L11 9.58579L13.0503 7.53553C13.6584 6.92742 14 6.10264 14 5.24264C14 3.45178 12.5482 2 10.7574 2C9.89736 2 9.07258 2.34163 8.46447 2.94975L6.41421 5L5 3.58579L7.05025 1.53553Z",fill:"#000000"}),e.jsx("path",{d:"M7.53553 13.0503L9.58579 11L11 12.4142L8.94975 14.4645C7.96656 15.4477 6.63308 16 5.24264 16C2.34721 16 0 13.6528 0 10.7574C0 9.36693 0.552347 8.03344 1.53553 7.05025L3.58579 5L5 6.41421L2.94975 8.46447C2.34163 9.07258 2 9.89736 2 10.7574C2 12.5482 3.45178 14 5.24264 14C6.10264 14 6.92742 13.6584 7.53553 13.0503Z",fill:"#000000"}),e.jsx("path",{d:"M5.70711 11.7071L11.7071 5.70711L10.2929 4.29289L4.29289 10.2929L5.70711 11.7071Z",fill:"#000000"})]})]})})})]})]})]})})})}function hn(){return e.jsx(e.Fragment,{children:e.jsxs(te,{title:"introduction",hideTitle:!0,children:[e.jsx(cn,{}),e.jsx(U,{style:{margin:"30px auto"}}),e.jsxs(M,{children:["On a ",e.jsx("i",{children:"summer night"}),", you lie in a field looking at ",e.jsx(I,{italic:!0,bold:!0,children:"fireflies"})," lighting up the sky. At first, their flashes seem ",e.jsx(d,{type:"temperature",italic:!0,children:"random"}),", ",e.jsx(d,{type:"temperature",italic:!0,children:"erratic"}),". But wait long enough, and you will see some ",e.jsx("i",{children:"magic"})," happen: these ",e.jsx(I,{italic:!0,bold:!0,children:"tiny lanterns"})," start to pulse ",e.jsx("strong",{children:"in unison"}),", creating ",e.jsx(d,{type:"electron",italic:!0,children:"waves of light"})," that ripple through the darkness.",e.jsx("br",{}),e.jsx("div",{style:{height:"13px"}}),"Not far from here, ",e.jsx(P,{italic:!0,bold:!0,children:"school of fishes"})," swim through the seas with a similar grace. Each fish moves ",e.jsx(d,{type:"temperature",italic:!0,children:"independently"}),", yet together they form ",e.jsx(d,{type:"electron",italic:!0,children:"fluid, coordinated pattern"}),", almost like a dance.",e.jsx("br",{}),e.jsx("div",{style:{height:"13px"}}),"And back in your own hands, even a simple ",e.jsx(L,{italic:!0,bold:!0,children:"magnet"})," carries these mysteries: countless ",e.jsx("i",{children:"atoms"})," inside ",e.jsx("strong",{children:"cooperate"})," to create a single, unified ",e.jsx(L,{italic:!0,children:"magnetism"}),"."]}),e.jsxs(M,{children:["What ties these scenes together? How does ",e.jsx(I,{italic:!0,bold:!0,children:"order"})," emerge, where we only expect ",e.jsx(d,{type:"temperature",italic:!0,children:"disorder"})," to happen? ",e.jsxs("i",{children:[e.jsx("strong",{children:"This"}),", is the story I want to tell you"]}),".",e.jsx("br",{}),e.jsx("div",{style:{height:"13px"}}),"But there's also a ",e.jsx("i",{children:"second story"}),", one just as important: how ",e.jsx(P,{bold:!0,italic:!0,children:"theory"})," itself is ",e.jsx(P,{italic:!0,children:"built"}),". We often picture scientists as people who ",e.jsx("i",{children:"know"})," every answer there is. In reality, theory is a ",e.jsx("strong",{children:"slow"})," and complex ",e.jsx("strong",{children:"process"}),": you build a model, test it against the world, find where it fails, and refine it again. It takes time, patience, and imagination. So ",e.jsx(I,{italic:!0,children:"let yourself be guided"})," along this article, ",e.jsx("strong",{children:"try to ask yourself questions when proposed to"}),", and step by step you'll see how ",e.jsx("i",{children:"science"})," is ",e.jsx("i",{children:"crafted"}),"."]}),e.jsxs(M,{children:["By the end of this journey, you won't just see ",e.jsx(L,{italic:!0,children:"magnets"}),", ",e.jsx(I,{italic:!0,bold:!0,children:"fireflies"}),", and ",e.jsx(P,{italic:!0,children:"fishes"})," differently. You will see paterns, and most importantly, ",e.jsx("strong",{children:"know why"})," they happen. You'll also see how ",e.jsx("strong",{children:"theorists"})," think, and why their work often unfolds in ",e.jsx("i",{children:"small"}),", ",e.jsx("i",{children:"steady steps"})," rather than sudden leaps.",e.jsx("br",{}),e.jsx("div",{style:{height:"13px"}}),"And without any longer introduction, ",e.jsx(L,{bold:!0,italic:!0,children:"let's begin"}),"."]})]})})}function dn({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulations."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function un(){return e.jsx(A,{FallbackComponent:dn,onError:C,children:e.jsxs("div",{className:"conclusion-simulations-div",children:[e.jsx(re,{customT:3}),e.jsx(Q,{omegaActivated:!0,showSliders:!1}),e.jsx(oe,{showSliders:!1})]})})}function mn(){return e.jsxs(te,{title:"Conclusion",className:"conclusion-part",children:[e.jsxs(z,{children:[e.jsxs(M,{children:["In this article, we explored ",e.jsx("i",{children:"three different"})," examples of systems in nature: ",e.jsx(L,{italic:!0,bold:!0,children:"magnets"}),", ",e.jsx(I,{italic:!0,bold:!0,children:"fireflies"})," and ",e.jsx(P,{italic:!0,bold:!0,children:"fishes"}),". ",e.jsx("i",{children:"A priori"}),", these systems are ",e.jsx("strong",{children:"very different"})," and do not have much in common. Every individual in a system should behave in a completely ",e.jsx(d,{type:"electron",bold:!0,children:"independent manner"}),", and each system should have its own ",e.jsx("strong",{children:"specific rules"})," and ",e.jsx("strong",{children:"behaviors"}),"."]}),e.jsx(un,{}),e.jsxs(M,{children:["However, if we vary a ",e.jsx("strong",{children:"certain parameter"})," (",e.jsx(d,{type:"temperature",italic:!0,children:"temperature"}),", ",e.jsx(d,{type:"coupling",italic:!0,children:"interaction strength"}),", ",e.jsx(d,{type:"temperature",italic:!0,children:"noise strength"}),"), we observe that ",e.jsx(d,{type:"magnet-north",italic:!0,children:"below"})," (",e.jsx("i",{children:"or above"}),") a certain ",e.jsx("i",{children:"threshold"}),", the individuals behave ",e.jsx(d,{type:"magnet-north",italic:!0,children:"independently"}),", while ",e.jsx(d,{type:"magnet-south",italic:!0,children:"above"})," (",e.jsx("i",{children:"or below !"}),") this ",e.jsx("i",{children:"threshold"}),", they start to ",e.jsx(d,{type:"magnet-south",italic:!0,children:"coordinate"})," with each other. This common phenomenon is what we call a ",e.jsx("strong",{children:"phase transition"}),"."]}),e.jsxs(M,{children:["Finally, I want to insist again on the fact that what we did is pretty ",e.jsx("i",{children:"impressive"})," : using a ",e.jsx(L,{italic:!0,bold:!0,children:"common set of rules"})," and a ",e.jsx(I,{italic:!0,bold:!0,children:"common mathematical model"}),", we were able to explain ",e.jsx(P,{italic:!0,children:"very different behaviors"})," in ",e.jsx(P,{italic:!0,children:"very different systems"}),". ",e.jsx("i",{children:"This"})," is the power of ",e.jsx("strong",{children:"theoretical physics"}),"!"]}),e.jsxs(M,{children:["Lastly, I also hope that you understand a bit more the ",e.jsx("strong",{children:"scientific method"})," and especially how ",e.jsx("strong",{children:"theorists work"}),", as it is often a ",e.jsx("i",{children:"gray zone"})," for many: they ",e.jsx(L,{italic:!0,children:"build models"})," for a given phenomenon, ",e.jsx(I,{italic:!0,children:"test"})," them, try to ",e.jsx(P,{italic:!0,children:"understand"})," the results, see where they ",e.jsx(L,{italic:!0,children:"match reality"}),", and then notice ",e.jsx(I,{italic:!0,children:"where they don't"}),". They then try to ",e.jsx("strong",{children:"modify their model"})," to better fit reality, and explore ",e.jsx("strong",{children:"other phenomena"})," that could be explained by this model.",e.jsx("br",{}),"This never-ending process is what takes a ",e.jsx("i",{children:"lot of time"}),", but it is also what leads to a ",e.jsx("i",{children:"deeper understanding"})," of the world around us."]}),e.jsx(ut,{list:[["Bartosz Ciechanowski","https://ciechanow.ski","Bartosz Ciechanowski is an awesome science communicator. You really should check this if you liked this article! I am a long time fan of his work, that really inspired me."],["Nicky Case","https://ncase.me","Another big inspiration is Nicky Case who makes amazing interactive explanations of complex topics."],["Nicky Case (Fireflies)","https://ncase.me/fireflies/","Here is Nicky Case's interactive explanation of the synchronization of fireflies, that inspired my own simulation."],["Femto physique (Ising model) - In French","https://femto-physique.fr/simulations/ising2D.php","Femto physique is a French website dedicated to physics teaching by simulations. It has a lot of great simulations, including this page on the Ising model!"],["Femto physique (Kuramoto model) - In French","https://femto-physique.fr/physique_statistique/modele-de-kuramoto.php","Again, the same website, but for the Kuramoto model."],["Vicsek Model of self-propelled particles","https://web.mit.edu/8.334/www/grades/projects/projects10/Hernandez-Lopez-Rogelio/dynamics_2.html","More insights on the Vicsek model and its applications."],["Stochastic Spin Dynamics by G.M. Wysin","https://www.phys.ksu.edu/personal/wysin/notes/stochastic.pdf","A very technical resource for those who want to go deeper in the subject. It explains how we can derive stochastic Langevin equations from quantum Hamiltonians."]]})]}),e.jsx(U,{}),e.jsx(z,{children:e.jsxs(M,{children:[e.jsx("i",{children:"Thank you for reading this article!"})," I hope you enjoyed it and learned something new. If you did, please ",e.jsx("strong",{children:"share it to some friends"})," or online! If you want to see ",e.jsx(I,{italic:!0,bold:!0,children:"more content like this"}),", ",e.jsx(L,{italic:!0,bold:!0,children:"sneak peeks"})," of my work, or ",e.jsx(P,{italic:!0,bold:!0,children:"behind the scenes"})," content, you can consider ",e.jsx("i",{children:"supporting me"})," on my ",e.jsx("a",{href:"https://www.patreon.com/mecanicascience",children:"Patreon"}),". If you have any ",e.jsx("i",{children:"question"}),", ",e.jsx("i",{children:"suggestion"})," or ",e.jsx("i",{children:"feedback"}),", feel free to reach out to me using the form below."]})})]})}function gn(){const[t,n]=j.useState(""),[a,o]=j.useState(""),[u,l]=j.useState(null),[h,c]=j.useState(""),[i,r]=j.useState(""),[s,m]=j.useState(!1);function x(g){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g)}function f(g){if(g.preventDefault(),l(null),!x(t)){o("Please enter a valid email address."),l({type:"error",text:"Please enter a valid email address."});return}if(!h.trim()||!i.trim()){l({type:"error",text:"Please fill in all fields."});return}o(""),m(!0),tt(h,t,i).then(p=>{p?(l({type:"success",text:"Thank you for your message! I'll get back to you soon."}),c(""),n(""),r("")):(C(new Error("Failed to send comment (1).")),l({type:"error",text:`There was an error sending your message.
Please try again later or reach me directly using mecanicascience@gmail.com.`})),m(!1)}).catch(()=>{C(new Error("Failed to send comment (2).")),l({type:"error",text:`There was an error sending your message.
Please try again later or reach me directly using mecanicascience@gmail.com.`}),m(!1)})}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"comments-g-container",children:[e.jsx(U,{}),e.jsx("div",{className:"comments-container",children:e.jsxs("form",{className:"comments-form",onSubmit:f,children:[e.jsx("input",{type:"text",id:"comments-name",placeholder:"Name",value:h,onChange:g=>c(g.target.value)}),e.jsx("input",{type:"email",id:"comments-email",placeholder:"Email",value:t,onChange:g=>{n(g.target.value),a&&o(""),u&&l(null)},"aria-invalid":!!a}),e.jsx("textarea",{id:"comments-content",placeholder:"Your Message",value:i,onChange:g=>r(g.target.value)}),e.jsx("button",{type:"submit",className:a||u&&u.type==="error"?"error":"",disabled:s,children:s?"Sending...":"Contact me"}),u&&e.jsx("div",{className:`comments-message comments-${u.type}`,role:"alert",children:u.text})]})})]})})}function fn(){return e.jsxs("footer",{children:[e.jsxs("div",{className:"footer-span-bot",style:{display:"none"},children:[e.jsxs("span",{children:[e.jsx("title",{children:"Mecanica Science"}),e.jsx("link",{rel:"canonical",href:"https://www.mecanicascience.fr"})]}),e.jsxs("span",{children:[e.jsx("a",{href:"https://twitter.com/MecanicaSci",children:"Twitter"}),e.jsx("a",{href:"https://github.com/mecanicascience",children:"Github"}),e.jsx("a",{href:"https://www.patreon.com/c/MecanicaScience",children:"Patreon"}),e.jsx("a",{href:"https://www.youtube.com/c/MecanicaScience",children:"Youtube"}),e.jsx("a",{href:"mailto:mecanicascience@gmail.com",children:"Email"})]})]}),e.jsxs("div",{className:"footer-container",children:[e.jsxs("ul",{className:"f-item f-first-item",id:"social-ic",children:[e.jsx("li",{children:e.jsx("a",{href:"https://www.youtube.com/c/MecanicaScience",title:"Youtube",children:e.jsx("img",{className:"social-ic-img",src:"/imgs/illustration/youtube-logo.png",alt:"youtube"})})}),e.jsx("li",{children:e.jsx("a",{href:"https://twitter.com/MecanicaSci",title:"Twitter",children:e.jsx("img",{className:"social-ic-img",src:"/imgs/illustration/twitter-logo.png",alt:"twitter"})})}),e.jsx("li",{children:e.jsx("a",{href:"https://github.com/mecanicascience",title:"Github",children:e.jsx("img",{className:"social-ic-img",src:"/imgs/illustration/github-logo.png",alt:"github"})})}),e.jsx("li",{children:e.jsx("a",{href:"https://www.patreon.com/c/MecanicaScience",title:"Patreon",children:e.jsx("img",{className:"social-ic-img",src:"/imgs/illustration/patreon-logo.png",alt:"patreon"})})})]}),e.jsx("h2",{className:"f-item underline-eff-white",id:"f-email"}),e.jsxs("ul",{className:"f-item",id:"f-links",style:{marginTop:"22px"},children:[e.jsx("li",{className:"underline-eff-white",children:e.jsx("a",{className:"f-link-i footer-link",href:"/",children:"Home"})}),e.jsx("li",{className:"underline-eff-white",children:e.jsx("a",{className:"f-link-i footer-link",href:"/contact",children:"Contact"})})]}),e.jsxs("div",{className:"f-item",id:"f-copyright",children:["¬©2025 MecanicaScience",e.jsxs("div",{className:"rules",children:["¬†¬†|¬†¬†",e.jsx("a",{href:"mailto:mecanicascience@gmail.com",children:"Email"}),"¬†¬†|¬†¬†",e.jsx("a",{href:"/feed",children:"RSS Feed"})]}),"¬†¬†|¬†¬†version 4.0.0"]})]})]})}function xn({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"header-error-simulation",children:[e.jsx("p",{children:"Something went wrong with the simulation."}),e.jsx("button",{onClick:n,children:"Try again"})]})}function Ve(t,n){return{x:t[0]*n.width,y:t[1]*n.height}}function ee(t,n){const a=1-Math.random(),o=Math.random();return Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*o)*n+t}function He(t,n,a,o,u){return t.map(l=>(l-n)*(u-o)/(a-n)+o)}function jn(t,n,a,o){const h=[...t.posList],c=[...t.velList],i=[...t.thetaList],r=[...t.tickingList],s=.3,m=new Array(h.length).fill(0).map(()=>[]);h.forEach((f,g)=>{h.forEach((p,w)=>{if(g!==w){const v=Math.abs(f[0]-p[0]),b=Math.abs(f[1]-p[1]),S=v>.5?1-v:v,k=b>.5?1-b:b;Math.hypot(S,k)<s&&m[g].push(w)}})}),i.forEach((f,g)=>{const p=m[g],w=t.omegaList[g];if(p.length>0){const S=p.reduce((k,N)=>{const T=i[N];return k+Math.sin(T-f)},0)/p.length;i[g]=f+w*o+a*S+Math.sqrt(n)*.1*ee(0,10)*o}i[g]=(i[g]+2*Math.PI)%(2*Math.PI);const v=.1,b=3*Math.PI/2;i[g]>b-v&&i[g]<b+v&&(r[g]=1),r[g]>0&&(r[g]-=2*o,r[g]<0&&(r[g]=0))});const x=.02;return h.forEach((f,g)=>{const p=t.velList[g];f[0]+=p[0]*o,f[1]+=p[1]*o,f[0]=(f[0]+1)%1,f[1]=(f[1]+1)%1;let w=Math.hypot(p[0],p[1]);p[0]+=x*ee(0,3)*o,p[1]+=x*ee(0,3)*o,p[0]=p[0]/Math.hypot(p[0],p[1])*w,p[1]=p[1]/Math.hypot(p[0],p[1])*w}),[h,c,i,r]}function pn(t,n,a,o){const u=new Path2D("m 0.39546563,-39.40837 c -9.57057903,0 -14.44356163,12.57643 -14.44356163,17.99942 0,5.42298 2.843754,8.37028 2.843754,13.8467 0,4.63847 -2.013608,6.81601 -2.629813,10.68152 A 44.659756,27.601246 0 0 1 2.9198556,1.10337 44.659756,27.601246 0 0 1 14.398746,2.03097 c -0.77399,-3.22107 -2.40295,-5.41183 -2.40295,-9.59322 0,-5.47642 2.84375,-8.42372 2.84375,-13.8467 0,-5.42299 -4.8735204,-17.99942 -14.44408037,-17.99942 z"),l=new Path2D("m 39.748406,-28.316643 c -11.32277,0.02642 -27.75261,9.453673 -27.75261,20.754393 0,0 38.20213,1.30358 38.20213,-13.491184 0,-5.085698 -4.51856,-7.27705 -10.44952,-7.263209 z M 17.931616,-7.70243 c -3.58518,0.019 -5.93582,0.14018 -5.93582,0.14018 0,17.220131 38.20213,26.967329 38.20213,12.172561 0,-11.096071 -21.51073,-12.369591 -32.26631,-12.312741 z"),h=new Path2D("m -38.956948,-28.31664 c 11.322765,0.02642 27.752606,9.453673 27.752606,20.75439 0,0 -38.202132,1.303581 -38.202132,-13.491181 0,-5.085698 4.518562,-7.27705 10.449526,-7.263209 z m 21.816786,20.61421 c 3.585183,0.01898 5.93582,0.14018 5.93582,0.14018 0,17.220132 -38.202132,26.967329 -38.202132,12.172563 0,-11.096074 21.510737,-12.369586 32.266312,-12.312743 z"),c=new Path2D("m 2.9100356,1.10234 a 44.659756,27.601246 0 0 0 -16.7540096,2.0159 c -0.11137,0.69844 -0.17674,1.4515 -0.17674,2.28462 0,5.443609 1.52538,34.031929 14.40687963,34.772549 C 13.267656,39.434789 14.793036,10.846469 14.793036,5.40286 c 0,-1.28289 -0.15595,-2.37701 -0.39429,-3.37189 A 44.659756,27.601246 0 0 0 2.9100356,1.10234 Z");a.posList.forEach((i,r)=>{const s=He(i,0,1,-.05,1.05);t.save();const m=Ve(s,n),x=a.velList[r],f=Math.atan2(x[1],x[0]),g=o[r]>0,p=`rgba(255, 190, 14, ${o[r]*1})`,w="rgba(10, 10, 10, 1.0)";t.translate(m.x,m.y);const v=.3;t.scale(v,v),t.rotate(f+1.5),g&&(t.beginPath(),t.filter="blur(12px)",t.arc(0,0,70,0,2*Math.PI),t.fillStyle=p,t.fill()),t.filter="none",t.fillStyle=w,t.strokeStyle=w,t.stroke(u),t.fill(u),t.lineWidth=2,t.strokeStyle=w,t.fillStyle="#dfdfdf25",t.stroke(l),t.stroke(h),t.fill(l),t.fill(h),t.fillStyle=g?p:"rgba(175, 172, 172, 0.2)",t.strokeStyle=w,t.stroke(c),t.fill(c),t.restore()})}function wn(t,n,a,o){const l=[...t.posList],h=[...t.velList],c=[...t.thetaList],i=.1,r=new Array(l.length).fill(0).map(()=>[]);return l.forEach((s,m)=>{l.forEach((x,f)=>{if(m!==f){const g=Math.abs(s[0]-x[0]),p=Math.abs(s[1]-x[1]),w=g>.5?1-g:g,v=p>.5?1-p:p;Math.hypot(w,v)<i&&r[m].push(f)}})}),c.forEach((s,m)=>{const x=r[m];if(x.length>0){const f=x.reduce((g,p)=>{const w=c[p];return g+Math.sin(w-s)},0)/x.length;c[m]=s+a*f+Math.sqrt(n)*.1*ee(0,10)*o}c[m]=(c[m]+2*Math.PI)%(2*Math.PI)}),l.forEach((s,m)=>{const x=t.velList[m],f=c[m];s[0]+=x*o*Math.cos(f),s[1]+=x*o*Math.sin(f),s[0]=(s[0]+1)%1,s[1]=(s[1]+1)%1}),[l,h,c]}function yn(t,n,a){const o=new Path2D("m 0,-55.361361 c -7.233624,0 -10.636408,16.309314 -11.276832,32.038875 0,0 -10.724855,13.7182701 -7.731827,16.9607201 2.298053,2.48955 6.066415,-3.9166901 7.692553,-7.0259301 0.124074,3.6295296 0.402629,7.0012301 0.819589,9.8603801 1.724739,11.82679 4.520187,26.0693599 7.10159,38.7227599 -0.728472,2.83258 -0.274272,5.35692 -2.141686,6.45639 -7.700014,4.53352 -12.889653,4.97487 -12.889653,10.10843 0,5.72617 14.482276,5.31951 18.426266,0.85421 3.94399,4.4653 18.426265,4.87196 18.426265,-0.85421 0,-5.13356 -5.189632,-5.57491 -12.889653,-10.10843 -1.86741,-1.09947 -1.912058,-3.87323 -2.32875,-6.39403 2.5814,-12.6534 5.563913,-26.9583299 7.288654,-38.7851199 0.41696,-2.85915 0.695509,-6.2308505 0.819589,-9.8603801 1.62613,3.10924 5.394503,9.5154801 7.692553,7.0259301 2.99303,-3.24245 -7.731827,-16.9607201 -7.731827,-16.9607201 C 10.636411,-39.052049 7.23363,-55.361361 0,-55.361361 Z");a.posList.forEach((u,l)=>{const h=He(u,0,1,-.05,1.05);t.save();const c=Ve(h,n),i=a.thetaList[l];t.translate(c.x,c.y);const r=.25;t.scale(r,r),t.rotate(i+1.7),t.fillStyle="#4e678bff",t.fill(o),t.restore()})}function vn(t,n,a){const[c,i]=[12,Math.floor(12/n)],r=.15,s=30,[m,x]=[s,Math.floor(s/n)];let f=j.useRef(new Array(12).fill(!1).map(()=>[0,0])),g=j.useRef(new Array(12).fill(!1).map(()=>[0,0])),p=j.useRef(new Array(12).fill(!1).map(()=>0)),w=j.useRef(new Array(12).fill(!1).map(()=>0)),v=j.useRef(new Array(12).fill(!1).map(()=>0));j.useMemo(()=>{const N=new Array(c*i).fill(!1).map(()=>[Math.random(),Math.random()]),T=new Array(c*i).fill(!1).map(()=>[.15*Math.random(),.15*Math.random()]),R=new Array(c*i).fill(!1).map(()=>ee(3,.2)),E=new Array(c*i).fill(!1).map(()=>Math.random()*2*Math.PI),F=new Array(c*i).fill(0);f.current=N,g.current=T,p.current=R,w.current=E,v.current=F},[]);let b=j.useRef(new Array(s).fill(!1).map(()=>[0,0])),S=j.useRef(new Array(s).fill(!1).map(()=>0)),k=j.useRef(new Array(s).fill(!1).map(()=>0));j.useMemo(()=>{const N=new Array(m*x).fill(!1).map(()=>[Math.random(),Math.random()]),T=new Array(m*x).fill(!1).map(()=>r*(.5+Math.random()*.6)),R=new Array(m*x).fill(!1).map(()=>Math.random()*2*Math.PI);b.current=N,S.current=T,k.current=R},[]),j.useEffect(()=>{if(!a)return;const N=t.current;N||C(new Error("Canvas reference is null (Header simulation)"));const T=N,R=window.devicePixelRatio||1,E=T.getBoundingClientRect(),F=E.width*R,D=E.height*R;T.width=F,T.height=D;const V=T.getContext("2d");V||C(new Error("Canvas context is null (Header simulation)"));const O=V;let X,ne=new Date().getTime();const be=()=>{const Me=new Date().getTime(),Se=(Me-ne)/1e3;ne=Me,O.fillStyle="#070124ff",O.clearRect(0,0,F,D),O.fillRect(0,0,F,D),[b.current,S.current,k.current]=wn({posList:b.current,thetaList:k.current,velList:S.current},7,.03,Se),yn(O,{width:F,height:D},{posList:b.current,velList:S.current,thetaList:k.current}),[f.current,g.current,w.current,v.current]=jn({posList:f.current,thetaList:w.current,velList:g.current,omegaList:p.current,tickingList:v.current},7,.03,Se),pn(O,{width:F,height:D},{posList:f.current,velList:g.current,thetaList:w.current},v.current),X=window.requestAnimationFrame(be)};return be(),()=>{window.cancelAnimationFrame(X)}},[t,a])}function bn(){const t=j.createRef(),n=j.useMemo(()=>16/6,[]),a=j.createRef(),[o,u]=j.useState(!1);return we(a,l=>u(l)),vn(t,n,o),e.jsx(e.Fragment,{children:e.jsx(A,{FallbackComponent:xn,onError:C,children:e.jsx("div",{className:"simulation-header-canvas-container",ref:a,children:e.jsx("canvas",{className:"simulation-header-canvas",ref:t})})})})}function Mn(){return e.jsxs(e.Fragment,{children:[e.jsx(bn,{}),e.jsx("header",{className:"app-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("h1",{children:["THE SCIENCE OF",e.jsx("br",{}),"COMPLEXITY"]}),e.jsx("p",{children:"LET'S START"}),e.jsx("div",{className:"header-btn-action",children:e.jsx("a",{className:"header-btn-scroll",style:{cursor:"pointer"},onClick:()=>{window.scrollTo({top:document.getElementById("introduction")?.offsetTop,behavior:"smooth"})},children:e.jsx("div",{className:"header-btn-scroll-box",children:e.jsxs("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M11.9997 13.1716L7.04996     8.22186L5.63574 9.63607L11.9997 16L18.3637 9.63607L16.9495 8.22186L11.9997 13.1716Z",fill:"rgba(200,200,200,1)"})]})})})})]})})]})}function Sn(){const t=he.createRef(),[n,a]=he.useState(!0);return j.useEffect(()=>{n&&t.current&&(et(),a(!1))},[t]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:t}),e.jsxs(ct,{children:[e.jsx(Mn,{}),e.jsx(hn,{}),e.jsx(Lt,{}),e.jsx(on,{}),e.jsx(Ft,{}),e.jsx(mn,{}),e.jsx(gn,{}),e.jsx(fn,{})]})]})}function Fe({error:t}){const{resetBoundary:n}=B();return e.jsxs("div",{className:"error-simulation",style:{maxWidth:"600px",margin:"auto"},children:[e.jsx("p",{children:"Something very (very) wrong happened in the article."}),e.jsx("button",{onClick:n,children:"Try again"})]})}const $e=document.getElementById("root");if($e){const t={color:["\\class{texcolor-#1}{#2}",2]};Ke.createRoot($e).render(e.jsx(A,{FallbackComponent:Fe,onError:C,children:e.jsx(he.StrictMode,{children:e.jsx(Ue,{config:{loader:{load:["[tex]/html"]},tex:{inlineMath:[["$","$"]],macros:t},options:{renderActions:{addMenu:[]}}},children:e.jsx(A,{FallbackComponent:Fe,onError:C,children:e.jsx(Sn,{})})})})}))}else throw new Error("Could not find root element. This is likely due to a missing or incorrect HTML file.");
